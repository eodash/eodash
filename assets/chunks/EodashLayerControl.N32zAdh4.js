import"@eox/layercontrol";import"@eox/jsonform";import"@eox/timecontrol";import{mapCompareEl as ct,mapEl as lt}from"@/store/states";import{getColFromLayer as xn}from"@/eodashSTAC/helpers";import{eodashCompareCollections as $n,eodashCollections as bn}from"@/utils/states";import{s as wn}from"./pinia.CQFdOwJa.js";import{useSTAcStore as _n}from"@/store/stac";import{h as An,p as Sn,o as ht,c as ut,K as vn,k as kn,e as En}from"./framework.BDJVpM2J.js";/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const $e=globalThis,Ze=$e.ShadowRoot&&($e.ShadyCSS===void 0||$e.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,Je=Symbol(),ft=new WeakMap;let Ft=class{constructor(e,n,r){if(this._$cssResult$=!0,r!==Je)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=n}get styleSheet(){let e=this.o;const n=this.t;if(Ze&&e===void 0){const r=n!==void 0&&n.length===1;r&&(e=ft.get(n)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&ft.set(n,e))}return e}toString(){return this.cssText}};const Mn=t=>new Ft(typeof t=="string"?t:t+"",void 0,Je),Tn=(t,...e)=>{const n=t.length===1?t[0]:e.reduce((r,i,s)=>r+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(i)+t[s+1],t[0]);return new Ft(n,t,Je)},Nn=(t,e)=>{if(Ze)t.adoptedStyleSheets=e.map(n=>n instanceof CSSStyleSheet?n:n.styleSheet);else for(const n of e){const r=document.createElement("style"),i=$e.litNonce;i!==void 0&&r.setAttribute("nonce",i),r.textContent=n.cssText,t.appendChild(r)}},dt=Ze?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let n="";for(const r of e.cssRules)n+=r.cssText;return Mn(n)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:Cn,defineProperty:Pn,getOwnPropertyDescriptor:Rn,getOwnPropertyNames:Un,getOwnPropertySymbols:On,getPrototypeOf:Hn}=Object,U=globalThis,pt=U.trustedTypes,Ln=pt?pt.emptyScript:"",Oe=U.reactiveElementPolyfillSupport,Q=(t,e)=>t,we={toAttribute(t,e){switch(e){case Boolean:t=t?Ln:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=t!==null;break;case Number:n=t===null?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t)}catch{n=null}}return n}},Qe=(t,e)=>!Cn(t,e),gt={attribute:!0,type:String,converter:we,reflect:!1,hasChanged:Qe};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),U.litPropertyMetadata??(U.litPropertyMetadata=new WeakMap);let V=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,n=gt){if(n.state&&(n.attribute=!1),this._$Ei(),this.elementProperties.set(e,n),!n.noAccessor){const r=Symbol(),i=this.getPropertyDescriptor(e,r,n);i!==void 0&&Pn(this.prototype,e,i)}}static getPropertyDescriptor(e,n,r){const{get:i,set:s}=Rn(this.prototype,e)??{get(){return this[n]},set(o){this[n]=o}};return{get(){return i==null?void 0:i.call(this)},set(o){const a=i==null?void 0:i.call(this);s.call(this,o),this.requestUpdate(e,a,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??gt}static _$Ei(){if(this.hasOwnProperty(Q("elementProperties")))return;const e=Hn(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(Q("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(Q("properties"))){const n=this.properties,r=[...Un(n),...On(n)];for(const i of r)this.createProperty(i,n[i])}const e=this[Symbol.metadata];if(e!==null){const n=litPropertyMetadata.get(e);if(n!==void 0)for(const[r,i]of n)this.elementProperties.set(r,i)}this._$Eh=new Map;for(const[n,r]of this.elementProperties){const i=this._$Eu(n,r);i!==void 0&&this._$Eh.set(i,n)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const n=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const i of r)n.unshift(dt(i))}else e!==void 0&&n.push(dt(e));return n}static _$Eu(e,n){const r=n.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise(n=>this.enableUpdating=n),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach(n=>n(this))}addController(e){var n;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((n=e.hostConnected)==null||n.call(e))}removeController(e){var n;(n=this._$EO)==null||n.delete(e)}_$E_(){const e=new Map,n=this.constructor.elementProperties;for(const r of n.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return Nn(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostConnected)==null?void 0:r.call(n)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostDisconnected)==null?void 0:r.call(n)})}attributeChangedCallback(e,n,r){this._$AK(e,r)}_$EC(e,n){var s;const r=this.constructor.elementProperties.get(e),i=this.constructor._$Eu(e,r);if(i!==void 0&&r.reflect===!0){const o=(((s=r.converter)==null?void 0:s.toAttribute)!==void 0?r.converter:we).toAttribute(n,r.type);this._$Em=e,o==null?this.removeAttribute(i):this.setAttribute(i,o),this._$Em=null}}_$AK(e,n){var s;const r=this.constructor,i=r._$Eh.get(e);if(i!==void 0&&this._$Em!==i){const o=r.getPropertyOptions(i),a=typeof o.converter=="function"?{fromAttribute:o.converter}:((s=o.converter)==null?void 0:s.fromAttribute)!==void 0?o.converter:we;this._$Em=i,this[i]=a.fromAttribute(n,o.type),this._$Em=null}}requestUpdate(e,n,r){if(e!==void 0){if(r??(r=this.constructor.getPropertyOptions(e)),!(r.hasChanged??Qe)(this[e],n))return;this.P(e,n,r)}this.isUpdatePending===!1&&(this._$ES=this._$ET())}P(e,n,r){this._$AL.has(e)||this._$AL.set(e,n),r.reflect===!0&&this._$Em!==e&&(this._$Ej??(this._$Ej=new Set)).add(e)}async _$ET(){this.isUpdatePending=!0;try{await this._$ES}catch(n){Promise.reject(n)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var r;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[s,o]of this._$Ep)this[s]=o;this._$Ep=void 0}const i=this.constructor.elementProperties;if(i.size>0)for(const[s,o]of i)o.wrapped!==!0||this._$AL.has(s)||this[s]===void 0||this.P(s,this[s],o)}let e=!1;const n=this._$AL;try{e=this.shouldUpdate(n),e?(this.willUpdate(n),(r=this._$EO)==null||r.forEach(i=>{var s;return(s=i.hostUpdate)==null?void 0:s.call(i)}),this.update(n)):this._$EU()}catch(i){throw e=!1,this._$EU(),i}e&&this._$AE(n)}willUpdate(e){}_$AE(e){var n;(n=this._$EO)==null||n.forEach(r=>{var i;return(i=r.hostUpdated)==null?void 0:i.call(r)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Ej&&(this._$Ej=this._$Ej.forEach(n=>this._$EC(n,this[n]))),this._$EU()}updated(e){}firstUpdated(e){}};V.elementStyles=[],V.shadowRootOptions={mode:"open"},V[Q("elementProperties")]=new Map,V[Q("finalized")]=new Map,Oe==null||Oe({ReactiveElement:V}),(U.reactiveElementVersions??(U.reactiveElementVersions=[])).push("2.0.4");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ee=globalThis,_e=ee.trustedTypes,mt=_e?_e.createPolicy("lit-html",{createHTML:t=>t}):void 0,jt="$lit$",P=`lit$${Math.random().toFixed(9).slice(2)}$`,Bt="?"+P,zn=`<${Bt}>`,D=document,re=()=>D.createComment(""),ie=t=>t===null||typeof t!="object"&&typeof t!="function",et=Array.isArray,In=t=>et(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",He=`[ 	
\f\r]`,Z=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,yt=/-->/g,xt=/>/g,H=RegExp(`>|${He}(?:([^\\s"'>=/]+)(${He}*=${He}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),$t=/'/g,bt=/"/g,qt=/^(?:script|style|textarea|title)$/i,Vt=t=>(e,...n)=>({_$litType$:t,strings:e,values:n}),ge=Vt(1),J=Vt(2),F=Symbol.for("lit-noChange"),x=Symbol.for("lit-nothing"),wt=new WeakMap,L=D.createTreeWalker(D,129);function Gt(t,e){if(!et(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return mt!==void 0?mt.createHTML(e):e}const Dn=(t,e)=>{const n=t.length-1,r=[];let i,s=e===2?"<svg>":e===3?"<math>":"",o=Z;for(let a=0;a<n;a++){const c=t[a];let l,u,h=-1,f=0;for(;f<c.length&&(o.lastIndex=f,u=o.exec(c),u!==null);)f=o.lastIndex,o===Z?u[1]==="!--"?o=yt:u[1]!==void 0?o=xt:u[2]!==void 0?(qt.test(u[2])&&(i=RegExp("</"+u[2],"g")),o=H):u[3]!==void 0&&(o=H):o===H?u[0]===">"?(o=i??Z,h=-1):u[1]===void 0?h=-2:(h=o.lastIndex-u[2].length,l=u[1],o=u[3]===void 0?H:u[3]==='"'?bt:$t):o===bt||o===$t?o=H:o===yt||o===xt?o=Z:(o=H,i=void 0);const p=o===H&&t[a+1].startsWith("/>")?" ":"";s+=o===Z?c+zn:h>=0?(r.push(l),c.slice(0,h)+jt+c.slice(h)+P+p):c+P+(h===-2?a:p)}return[Gt(t,s+(t[n]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),r]};class se{constructor({strings:e,_$litType$:n},r){let i;this.parts=[];let s=0,o=0;const a=e.length-1,c=this.parts,[l,u]=Dn(e,n);if(this.el=se.createElement(l,r),L.currentNode=this.el.content,n===2||n===3){const h=this.el.content.firstChild;h.replaceWith(...h.childNodes)}for(;(i=L.nextNode())!==null&&c.length<a;){if(i.nodeType===1){if(i.hasAttributes())for(const h of i.getAttributeNames())if(h.endsWith(jt)){const f=u[o++],p=i.getAttribute(h).split(P),m=/([.?@])?(.*)/.exec(f);c.push({type:1,index:s,name:m[2],strings:p,ctor:m[1]==="."?jn:m[1]==="?"?Bn:m[1]==="@"?qn:Ce}),i.removeAttribute(h)}else h.startsWith(P)&&(c.push({type:6,index:s}),i.removeAttribute(h));if(qt.test(i.tagName)){const h=i.textContent.split(P),f=h.length-1;if(f>0){i.textContent=_e?_e.emptyScript:"";for(let p=0;p<f;p++)i.append(h[p],re()),L.nextNode(),c.push({type:2,index:++s});i.append(h[f],re())}}}else if(i.nodeType===8)if(i.data===Bt)c.push({type:2,index:s});else{let h=-1;for(;(h=i.data.indexOf(P,h+1))!==-1;)c.push({type:7,index:s}),h+=P.length-1}s++}}static createElement(e,n){const r=D.createElement("template");return r.innerHTML=e,r}}function X(t,e,n=t,r){var o,a;if(e===F)return e;let i=r!==void 0?(o=n._$Co)==null?void 0:o[r]:n._$Cl;const s=ie(e)?void 0:e._$litDirective$;return(i==null?void 0:i.constructor)!==s&&((a=i==null?void 0:i._$AO)==null||a.call(i,!1),s===void 0?i=void 0:(i=new s(t),i._$AT(t,n,r)),r!==void 0?(n._$Co??(n._$Co=[]))[r]=i:n._$Cl=i),i!==void 0&&(e=X(t,i._$AS(t,e.values),i,r)),e}class Fn{constructor(e,n){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:n},parts:r}=this._$AD,i=((e==null?void 0:e.creationScope)??D).importNode(n,!0);L.currentNode=i;let s=L.nextNode(),o=0,a=0,c=r[0];for(;c!==void 0;){if(o===c.index){let l;c.type===2?l=new le(s,s.nextSibling,this,e):c.type===1?l=new c.ctor(s,c.name,c.strings,this,e):c.type===6&&(l=new Vn(s,this,e)),this._$AV.push(l),c=r[++a]}o!==(c==null?void 0:c.index)&&(s=L.nextNode(),o++)}return L.currentNode=D,i}p(e){let n=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,n),n+=r.strings.length-2):r._$AI(e[n])),n++}}class le{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,n,r,i){this.type=2,this._$AH=x,this._$AN=void 0,this._$AA=e,this._$AB=n,this._$AM=r,this.options=i,this._$Cv=(i==null?void 0:i.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const n=this._$AM;return n!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=n.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,n=this){e=X(this,e,n),ie(e)?e===x||e==null||e===""?(this._$AH!==x&&this._$AR(),this._$AH=x):e!==this._$AH&&e!==F&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):In(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==x&&ie(this._$AH)?this._$AA.nextSibling.data=e:this.T(D.createTextNode(e)),this._$AH=e}$(e){var s;const{values:n,_$litType$:r}=e,i=typeof r=="number"?this._$AC(e):(r.el===void 0&&(r.el=se.createElement(Gt(r.h,r.h[0]),this.options)),r);if(((s=this._$AH)==null?void 0:s._$AD)===i)this._$AH.p(n);else{const o=new Fn(i,this),a=o.u(this.options);o.p(n),this.T(a),this._$AH=o}}_$AC(e){let n=wt.get(e.strings);return n===void 0&&wt.set(e.strings,n=new se(e)),n}k(e){et(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let r,i=0;for(const s of e)i===n.length?n.push(r=new le(this.O(re()),this.O(re()),this,this.options)):r=n[i],r._$AI(s),i++;i<n.length&&(this._$AR(r&&r._$AB.nextSibling,i),n.length=i)}_$AR(e=this._$AA.nextSibling,n){var r;for((r=this._$AP)==null?void 0:r.call(this,!1,!0,n);e&&e!==this._$AB;){const i=e.nextSibling;e.remove(),e=i}}setConnected(e){var n;this._$AM===void 0&&(this._$Cv=e,(n=this._$AP)==null||n.call(this,e))}}class Ce{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,n,r,i,s){this.type=1,this._$AH=x,this._$AN=void 0,this.element=e,this.name=n,this._$AM=i,this.options=s,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=x}_$AI(e,n=this,r,i){const s=this.strings;let o=!1;if(s===void 0)e=X(this,e,n,0),o=!ie(e)||e!==this._$AH&&e!==F,o&&(this._$AH=e);else{const a=e;let c,l;for(e=s[0],c=0;c<s.length-1;c++)l=X(this,a[r+c],n,c),l===F&&(l=this._$AH[c]),o||(o=!ie(l)||l!==this._$AH[c]),l===x?e=x:e!==x&&(e+=(l??"")+s[c+1]),this._$AH[c]=l}o&&!i&&this.j(e)}j(e){e===x?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class jn extends Ce{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===x?void 0:e}}class Bn extends Ce{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==x)}}class qn extends Ce{constructor(e,n,r,i,s){super(e,n,r,i,s),this.type=5}_$AI(e,n=this){if((e=X(this,e,n,0)??x)===F)return;const r=this._$AH,i=e===x&&r!==x||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,s=e!==x&&(r===x||i);i&&this.element.removeEventListener(this.name,this,r),s&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var n;typeof this._$AH=="function"?this._$AH.call(((n=this.options)==null?void 0:n.host)??this.element,e):this._$AH.handleEvent(e)}}class Vn{constructor(e,n,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=n,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){X(this,e)}}const Le=ee.litHtmlPolyfillSupport;Le==null||Le(se,le),(ee.litHtmlVersions??(ee.litHtmlVersions=[])).push("3.2.1");const Gn=(t,e,n)=>{const r=(n==null?void 0:n.renderBefore)??e;let i=r._$litPart$;if(i===void 0){const s=(n==null?void 0:n.renderBefore)??null;r._$litPart$=i=new le(e.insertBefore(re(),s),s,void 0,n??{})}return i._$AI(t),i};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */let te=class extends V{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var n;const e=super.createRenderRoot();return(n=this.renderOptions).renderBefore??(n.renderBefore=e.firstChild),e}update(e){const n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=Gn(n,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)==null||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)==null||e.setConnected(!1)}render(){return F}};var Dt;te._$litElement$=!0,te.finalized=!0,(Dt=globalThis.litElementHydrateSupport)==null||Dt.call(globalThis,{LitElement:te});const ze=globalThis.litElementPolyfillSupport;ze==null||ze({LitElement:te});(globalThis.litElementVersions??(globalThis.litElementVersions=[])).push("4.1.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Wn=t=>(e,n)=>{n!==void 0?n.addInitializer(()=>{customElements.define(t,e)}):customElements.define(t,e)};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Xn={attribute:!0,type:String,converter:we,reflect:!1,hasChanged:Qe},Kn=(t=Xn,e,n)=>{const{kind:r,metadata:i}=n;let s=globalThis.litPropertyMetadata.get(i);if(s===void 0&&globalThis.litPropertyMetadata.set(i,s=new Map),s.set(n.name,t),r==="accessor"){const{name:o}=n;return{set(a){const c=e.get.call(this);e.set.call(this,a),this.requestUpdate(o,c,t)},init(a){return a!==void 0&&this.P(o,void 0,t),a}}}if(r==="setter"){const{name:o}=n;return function(a){const c=this[o];e.call(this,a),this.requestUpdate(o,c,t)}}throw Error("Unsupported decorator location: "+r)};function $(t){return(e,n)=>typeof n=="object"?Kn(t,e,n):((r,i,s)=>{const o=i.hasOwnProperty(s);return i.constructor.createProperty(s,o?{...r,wrapped:!0}:r),o?Object.getOwnPropertyDescriptor(i,s):void 0})(t,e,n)}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Yn=(t,e,n)=>(n.configurable=!0,n.enumerable=!0,Reflect.decorate&&typeof e!="object"&&Object.defineProperty(t,e,n),n);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function Zn(t,e){return(n,r,i)=>{const s=o=>{var a;return((a=o.renderRoot)==null?void 0:a.querySelector(t))??null};return Yn(n,r,{get(){return s(this)}})}}function be(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Jn(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Wt(t){let e,n,r;t.length!==2?(e=be,n=(a,c)=>be(t(a),c),r=(a,c)=>t(a)-c):(e=t===be||t===Jn?t:Qn,n=t,r=t);function i(a,c,l=0,u=a.length){if(l<u){if(e(c,c)!==0)return u;do{const h=l+u>>>1;n(a[h],c)<0?l=h+1:u=h}while(l<u)}return l}function s(a,c,l=0,u=a.length){if(l<u){if(e(c,c)!==0)return u;do{const h=l+u>>>1;n(a[h],c)<=0?l=h+1:u=h}while(l<u)}return l}function o(a,c,l=0,u=a.length){const h=i(a,c,l,u-1);return h>l&&r(a[h-1],c)>-r(a[h],c)?h-1:h}return{left:i,center:o,right:s}}function Qn(){return 0}function er(t){return t===null?NaN:+t}const tr=Wt(be),tt=tr.right;Wt(er).center;class _t extends Map{constructor(e,n=ir){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(At(this,e))}has(e){return super.has(At(this,e))}set(e,n){return super.set(nr(this,e),n)}delete(e){return super.delete(rr(this,e))}}function At({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function nr({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function rr({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function ir(t){return t!==null&&typeof t=="object"?t.valueOf():t}const sr=Math.sqrt(50),or=Math.sqrt(10),ar=Math.sqrt(2);function Ae(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=sr?10:s>=or?5:s>=ar?2:1;let a,c,l;return i<0?(l=Math.pow(10,-i)/o,a=Math.round(t*l),c=Math.round(e*l),a/l<t&&++a,c/l>e&&--c,l=-l):(l=Math.pow(10,i)*o,a=Math.round(t/l),c=Math.round(e/l),a*l<t&&++a,c*l>e&&--c),c<a&&.5<=n&&n<2?Ae(t,e,n*2):[a,c,l]}function cr(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,s,o]=r?Ae(e,t,n):Ae(t,e,n);if(!(s>=i))return[];const a=s-i+1,c=new Array(a);if(r)if(o<0)for(let l=0;l<a;++l)c[l]=(s-l)/-o;else for(let l=0;l<a;++l)c[l]=(s-l)*o;else if(o<0)for(let l=0;l<a;++l)c[l]=(i+l)/-o;else for(let l=0;l<a;++l)c[l]=(i+l)*o;return c}function Ge(t,e,n){return e=+e,t=+t,n=+n,Ae(t,e,n)[2]}function lr(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?Ge(e,t,n):Ge(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function Pe(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function hr(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const St=Symbol("implicit");function Xt(){var t=new _t,e=[],n=[],r=St;function i(s){let o=t.get(s);if(o===void 0){if(r!==St)return r;t.set(s,o=e.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new _t;for(const o of s)t.has(o)||t.set(o,e.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return Xt(e,n).unknown(r)},Pe.apply(i,arguments),i}function he(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Re(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function j(){}var oe=.7,Se=1/oe,G="\\s*([+-]?\\d+)\\s*",ae="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",E="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ur=/^#([0-9a-f]{3,8})$/,fr=new RegExp(`^rgb\\(${G},${G},${G}\\)$`),dr=new RegExp(`^rgb\\(${E},${E},${E}\\)$`),pr=new RegExp(`^rgba\\(${G},${G},${G},${ae}\\)$`),gr=new RegExp(`^rgba\\(${E},${E},${E},${ae}\\)$`),mr=new RegExp(`^hsl\\(${ae},${E},${E}\\)$`),yr=new RegExp(`^hsla\\(${ae},${E},${E},${ae}\\)$`),vt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};he(j,ce,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:kt,formatHex:kt,formatHex8:xr,formatHsl:$r,formatRgb:Et,toString:Et});function kt(){return this.rgb().formatHex()}function xr(){return this.rgb().formatHex8()}function $r(){return Yt(this).formatHsl()}function Et(){return this.rgb().formatRgb()}function ce(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=ur.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Mt(e):n===3?new b(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?me(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?me(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=fr.exec(t))?new b(e[1],e[2],e[3],1):(e=dr.exec(t))?new b(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=pr.exec(t))?me(e[1],e[2],e[3],e[4]):(e=gr.exec(t))?me(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=mr.exec(t))?Ct(e[1],e[2]/100,e[3]/100,1):(e=yr.exec(t))?Ct(e[1],e[2]/100,e[3]/100,e[4]):vt.hasOwnProperty(t)?Mt(vt[t]):t==="transparent"?new b(NaN,NaN,NaN,0):null}function Mt(t){return new b(t>>16&255,t>>8&255,t&255,1)}function me(t,e,n,r){return r<=0&&(t=e=n=NaN),new b(t,e,n,r)}function Kt(t){return t instanceof j||(t=ce(t)),t?(t=t.rgb(),new b(t.r,t.g,t.b,t.opacity)):new b}function We(t,e,n,r){return arguments.length===1?Kt(t):new b(t,e,n,r??1)}function b(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}he(b,We,Re(j,{brighter(t){return t=t==null?Se:Math.pow(Se,t),new b(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?oe:Math.pow(oe,t),new b(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new b(I(this.r),I(this.g),I(this.b),ve(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Tt,formatHex:Tt,formatHex8:br,formatRgb:Nt,toString:Nt}));function Tt(){return`#${z(this.r)}${z(this.g)}${z(this.b)}`}function br(){return`#${z(this.r)}${z(this.g)}${z(this.b)}${z((isNaN(this.opacity)?1:this.opacity)*255)}`}function Nt(){const t=ve(this.opacity);return`${t===1?"rgb(":"rgba("}${I(this.r)}, ${I(this.g)}, ${I(this.b)}${t===1?")":`, ${t})`}`}function ve(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function I(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function z(t){return t=I(t),(t<16?"0":"")+t.toString(16)}function Ct(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new k(t,e,n,r)}function Yt(t){if(t instanceof k)return new k(t.h,t.s,t.l,t.opacity);if(t instanceof j||(t=ce(t)),!t)return new k;if(t instanceof k)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),o=NaN,a=s-i,c=(s+i)/2;return a?(e===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-e)/a+2:o=(e-n)/a+4,a/=c<.5?s+i:2-s-i,o*=60):a=c>0&&c<1?0:o,new k(o,a,c,t.opacity)}function wr(t,e,n,r){return arguments.length===1?Yt(t):new k(t,e,n,r??1)}function k(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}he(k,wr,Re(j,{brighter(t){return t=t==null?Se:Math.pow(Se,t),new k(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?oe:Math.pow(oe,t),new k(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new b(Ie(t>=240?t-240:t+120,i,r),Ie(t,i,r),Ie(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new k(Pt(this.h),ye(this.s),ye(this.l),ve(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=ve(this.opacity);return`${t===1?"hsl(":"hsla("}${Pt(this.h)}, ${ye(this.s)*100}%, ${ye(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Pt(t){return t=(t||0)%360,t<0?t+360:t}function ye(t){return Math.max(0,Math.min(1,t||0))}function Ie(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const _r=Math.PI/180,Ar=180/Math.PI,ke=18,Zt=.96422,Jt=1,Qt=.82521,en=4/29,W=6/29,tn=3*W*W,Sr=W*W*W;function nn(t){if(t instanceof M)return new M(t.l,t.a,t.b,t.opacity);if(t instanceof C)return rn(t);t instanceof b||(t=Kt(t));var e=Be(t.r),n=Be(t.g),r=Be(t.b),i=De((.2225045*e+.7168786*n+.0606169*r)/Jt),s,o;return e===n&&n===r?s=o=i:(s=De((.4360747*e+.3850649*n+.1430804*r)/Zt),o=De((.0139322*e+.0971045*n+.7141733*r)/Qt)),new M(116*i-16,500*(s-i),200*(i-o),t.opacity)}function vr(t,e,n,r){return arguments.length===1?nn(t):new M(t,e,n,r??1)}function M(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}he(M,vr,Re(j,{brighter(t){return new M(this.l+ke*(t??1),this.a,this.b,this.opacity)},darker(t){return new M(this.l-ke*(t??1),this.a,this.b,this.opacity)},rgb(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return e=Zt*Fe(e),t=Jt*Fe(t),n=Qt*Fe(n),new b(je(3.1338561*e-1.6168667*t-.4906146*n),je(-.9787684*e+1.9161415*t+.033454*n),je(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}}));function De(t){return t>Sr?Math.pow(t,1/3):t/tn+en}function Fe(t){return t>W?t*t*t:tn*(t-en)}function je(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Be(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function kr(t){if(t instanceof C)return new C(t.h,t.c,t.l,t.opacity);if(t instanceof M||(t=nn(t)),t.a===0&&t.b===0)return new C(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*Ar;return new C(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function Xe(t,e,n,r){return arguments.length===1?kr(t):new C(t,e,n,r??1)}function C(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}function rn(t){if(isNaN(t.h))return new M(t.l,0,0,t.opacity);var e=t.h*_r;return new M(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}he(C,Xe,Re(j,{brighter(t){return new C(this.h,this.c,this.l+ke*(t??1),this.opacity)},darker(t){return new C(this.h,this.c,this.l-ke*(t??1),this.opacity)},rgb(){return rn(this).rgb()}}));const Ue=t=>()=>t;function sn(t,e){return function(n){return t+n*e}}function Er(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Mr(t,e){var n=e-t;return n?sn(t,n>180||n<-180?n-360*Math.round(n/360):n):Ue(isNaN(t)?e:t)}function Tr(t){return(t=+t)==1?ne:function(e,n){return n-e?Er(e,n,t):Ue(isNaN(e)?n:e)}}function ne(t,e){var n=e-t;return n?sn(t,n):Ue(isNaN(t)?e:t)}const Rt=function t(e){var n=Tr(e);function r(i,s){var o=n((i=We(i)).r,(s=We(s)).r),a=n(i.g,s.g),c=n(i.b,s.b),l=ne(i.opacity,s.opacity);return function(u){return i.r=o(u),i.g=a(u),i.b=c(u),i.opacity=l(u),i+""}}return r.gamma=t,r}(1);function Nr(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=t[i]*(1-s)+e[i]*s;return r}}function Cr(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Pr(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=ue(t[o],e[o]);for(;o<n;++o)s[o]=e[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function Rr(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Ee(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Ur(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=ue(t[i],e[i]):r[i]=e[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var Ke=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,qe=new RegExp(Ke.source,"g");function Or(t){return function(){return t}}function Hr(t){return function(e){return t(e)+""}}function Lr(t,e){var n=Ke.lastIndex=qe.lastIndex=0,r,i,s,o=-1,a=[],c=[];for(t=t+"",e=e+"";(r=Ke.exec(t))&&(i=qe.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,c.push({i:o,x:Ee(r,i)})),n=qe.lastIndex;return n<e.length&&(s=e.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?c[0]?Hr(c[0].x):Or(e):(e=c.length,function(l){for(var u=0,h;u<e;++u)a[(h=c[u]).i]=h.x(l);return a.join("")})}function ue(t,e){var n=typeof e,r;return e==null||n==="boolean"?Ue(e):(n==="number"?Ee:n==="string"?(r=ce(e))?(e=r,Rt):Lr:e instanceof ce?Rt:e instanceof Date?Rr:Cr(e)?Nr:Array.isArray(e)?Pr:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Ur:Ee)(t,e)}function on(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function zr(t){return function(e,n){var r=t((e=Xe(e)).h,(n=Xe(n)).h),i=ne(e.c,n.c),s=ne(e.l,n.l),o=ne(e.opacity,n.opacity);return function(a){return e.h=r(a),e.c=i(a),e.l=s(a),e.opacity=o(a),e+""}}}const an=zr(Mr);function Ir(t,e){e===void 0&&(e=t,t=ue);for(var n=0,r=e.length-1,i=e[0],s=new Array(r<0?0:r);n<r;)s[n]=t(i,i=e[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function Dr(t){return function(){return t}}function Fr(t){return+t}var Ut=[0,1];function R(t){return t}function Ye(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Dr(isNaN(e)?NaN:.5)}function jr(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function Br(t,e,n){var r=t[0],i=t[1],s=e[0],o=e[1];return i<r?(r=Ye(i,r),s=n(o,s)):(r=Ye(r,i),s=n(s,o)),function(a){return s(r(a))}}function qr(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),s=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=Ye(t[o],t[o+1]),s[o]=n(e[o],e[o+1]);return function(a){var c=tt(t,a,1,r)-1;return s[c](i[c](a))}}function Vr(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Gr(){var t=Ut,e=Ut,n=ue,r,i,s,o=R,a,c,l;function u(){var f=Math.min(t.length,e.length);return o!==R&&(o=jr(t[0],t[f-1])),a=f>2?qr:Br,c=l=null,h}function h(f){return f==null||isNaN(f=+f)?s:(c||(c=a(t.map(r),e,n)))(r(o(f)))}return h.invert=function(f){return o(i((l||(l=a(e,t.map(r),Ee)))(f)))},h.domain=function(f){return arguments.length?(t=Array.from(f,Fr),u()):t.slice()},h.range=function(f){return arguments.length?(e=Array.from(f),u()):e.slice()},h.rangeRound=function(f){return e=Array.from(f),n=on,u()},h.clamp=function(f){return arguments.length?(o=f?!0:R,u()):o!==R},h.interpolate=function(f){return arguments.length?(n=f,u()):n},h.unknown=function(f){return arguments.length?(s=f,h):s},function(f,p){return r=f,i=p,u()}}function Wr(){return Gr()(R,R)}function Xr(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Me(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function K(t){return t=Me(Math.abs(t)),t?t[1]:NaN}function Kr(t,e){return function(n,r){for(var i=n.length,s=[],o=0,a=t[0],c=0;i>0&&a>0&&(c+a+1>r&&(a=Math.max(1,r-c)),s.push(n.substring(i-=a,i+a)),!((c+=a+1)>r));)a=t[o=(o+1)%t.length];return s.reverse().join(e)}}function Yr(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var Zr=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Te(t){if(!(e=Zr.exec(t)))throw new Error("invalid format: "+t);var e;return new nt({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Te.prototype=nt.prototype;function nt(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}nt.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Jr(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var cn;function Qr(t,e){var n=Me(t,e);if(!n)return t+"";var r=n[0],i=n[1],s=i-(cn=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+Me(t,Math.max(0,e+s-1))[0]}function Ot(t,e){var n=Me(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Ht={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Xr,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Ot(t*100,e),r:Ot,s:Qr,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Lt(t){return t}var zt=Array.prototype.map,It=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function ei(t){var e=t.grouping===void 0||t.thousands===void 0?Lt:Kr(zt.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?Lt:Yr(zt.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"−":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function l(h){h=Te(h);var f=h.fill,p=h.align,m=h.sign,T=h.symbol,_=h.zero,A=h.width,B=h.comma,w=h.precision,Y=h.trim,S=h.type;S==="n"?(B=!0,S="g"):Ht[S]||(w===void 0&&(w=12),Y=!0,S="g"),(_||f==="0"&&p==="=")&&(_=!0,f="0",p="=");var gn=T==="$"?n:T==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():"",mn=T==="$"?r:/[%p]/.test(S)?o:"",st=Ht[S],yn=/[defgprs%]/.test(S);w=w===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function ot(d){var O=gn,v=mn,q,at,fe;if(S==="c")v=st(d)+v,d="";else{d=+d;var de=d<0||1/d<0;if(d=isNaN(d)?c:st(Math.abs(d),w),Y&&(d=Jr(d)),de&&+d==0&&m!=="+"&&(de=!1),O=(de?m==="("?m:a:m==="-"||m==="("?"":m)+O,v=(S==="s"?It[8+cn/3]:"")+v+(de&&m==="("?")":""),yn){for(q=-1,at=d.length;++q<at;)if(fe=d.charCodeAt(q),48>fe||fe>57){v=(fe===46?i+d.slice(q+1):d.slice(q))+v,d=d.slice(0,q);break}}}B&&!_&&(d=e(d,1/0));var pe=O.length+d.length+v.length,N=pe<A?new Array(A-pe+1).join(f):"";switch(B&&_&&(d=e(N+d,N.length?A-v.length:1/0),N=""),p){case"<":d=O+d+v+N;break;case"=":d=O+N+d+v;break;case"^":d=N.slice(0,pe=N.length>>1)+O+d+v+N.slice(pe);break;default:d=N+O+d+v;break}return s(d)}return ot.toString=function(){return h+""},ot}function u(h,f){var p=l((h=Te(h),h.type="f",h)),m=Math.max(-8,Math.min(8,Math.floor(K(f)/3)))*3,T=Math.pow(10,-m),_=It[8+m/3];return function(A){return p(T*A)+_}}return{format:l,formatPrefix:u}}var xe,rt,ln;ti({thousands:",",grouping:[3],currency:["$",""]});function ti(t){return xe=ei(t),rt=xe.format,ln=xe.formatPrefix,xe}function ni(t){return Math.max(0,-K(Math.abs(t)))}function ri(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(K(e)/3)))*3-K(Math.abs(t)))}function ii(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,K(e)-K(t))+1}function si(t,e,n,r){var i=lr(t,e,n),s;switch(r=Te(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(s=ri(i,o))&&(r.precision=s),ln(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=ii(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=ni(i))&&(r.precision=s-(r.type==="%")*2);break}}return rt(r)}function it(t){var e=t.domain;return t.ticks=function(n){var r=e();return cr(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return si(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,s=r.length-1,o=r[i],a=r[s],c,l,u=10;for(a<o&&(l=o,o=a,a=l,l=i,i=s,s=l);u-- >0;){if(l=Ge(o,a,n),l===c)return r[i]=o,r[s]=a,e(r);if(l>0)o=Math.floor(o/l)*l,a=Math.ceil(a/l)*l;else if(l<0)o=Math.ceil(o*l)/l,a=Math.floor(a*l)/l;else break;c=l}return t},t}function Ne(){var t=Wr();return t.copy=function(){return Vr(t,Ne())},Pe.apply(t,arguments),it(t)}function hn(){var t=0,e=1,n=1,r=[.5],i=[0,1],s;function o(c){return c!=null&&c<=c?i[tt(r,c,0,n)]:s}function a(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*e-(c-n)*t)/(n+1);return o}return o.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,a()):[t,e]},o.range=function(c){return arguments.length?(n=(i=Array.from(c)).length-1,a()):i.slice()},o.invertExtent=function(c){var l=i.indexOf(c);return l<0?[NaN,NaN]:l<1?[t,r[0]]:l>=n?[r[n-1],e]:[r[l-1],r[l]]},o.unknown=function(c){return arguments.length&&(s=c),o},o.thresholds=function(){return r.slice()},o.copy=function(){return hn().domain([t,e]).range(i).unknown(s)},Pe.apply(it(o),arguments)}function un(){var t=[.5],e=[0,1],n,r=1;function i(s){return s!=null&&s<=s?e[tt(t,s,0,r)]:n}return i.domain=function(s){return arguments.length?(t=Array.from(s),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(s){return arguments.length?(e=Array.from(s),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(s){var o=e.indexOf(s);return[t[o-1],t[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return un().domain(t).range(e).unknown(n)},Pe.apply(i,arguments)}function oi(){var t=0,e=1,n,r,i,s,o=R,a=!1,c;function l(h){return h==null||isNaN(h=+h)?c:o(i===0?.5:(h=(s(h)-n)*i,a?Math.max(0,Math.min(1,h)):h))}l.domain=function(h){return arguments.length?([t,e]=h,n=s(t=+t),r=s(e=+e),i=n===r?0:1/(r-n),l):[t,e]},l.clamp=function(h){return arguments.length?(a=!!h,l):a},l.interpolator=function(h){return arguments.length?(o=h,l):o};function u(h){return function(f){var p,m;return arguments.length?([p,m]=f,o=h(p,m),l):[o(0),o(1)]}}return l.range=u(ue),l.rangeRound=u(on),l.unknown=function(h){return arguments.length?(c=h,l):c},function(h){return s=h,n=h(t),r=h(e),i=n===r?0:1/(r-n),l}}function ai(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function fn(){var t=it(oi()(R));return t.copy=function(){return ai(t,fn())},hr.apply(t,arguments)}class ci{constructor(e){this.cle=e}setColorScale(){switch(this.cle.scaleType){case"continuous":this.setContinousColorScale();break;case"discrete":this.setDiscreteColorScale();break;case"threshold":this.setThresholdColorScale();break;case"categorical":this.setCategoricalColorScale();break;default:this.invalidScaleType(this.cle.scaleType)}}setContinousColorScale(){const{interpolator:e,domain:n,range:r}=this.cle;this.colorScale=e?fn(e).domain(n):Ne().range(r).domain(n).interpolate(an)}setDiscreteColorScale(){this.colorScale=hn().domain(this.cle.domain).range(this.cle.range)}setThresholdColorScale(){const e=this.cle.domain;this.colorScale=un().domain(e.slice(1,e.length-1)).range(this.cle.range)}setCategoricalColorScale(){this.colorScale=Xt().domain(this.cle.domain).range(this.cle.range)}invalidScaleType(e){throw new Error(`invalid property scaletype: ${e}.
      Must be one of "categorical", "continuous", "discrete", "threshold".`)}}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const li={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},hi=t=>(...e)=>({_$litDirective$:t,values:e});class ui{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,n,r){this._$Ct=e,this._$AM=n,this._$Ci=r}_$AS(e,n){return this.update(e,n)}update(e,n){return this.render(...n)}}/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Ve=hi(class extends ui{constructor(t){var e;if(super(t),t.type!==li.ATTRIBUTE||t.name!=="class"||((e=t.strings)==null?void 0:e.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(t){return" "+Object.keys(t).filter(e=>t[e]).join(" ")+" "}update(t,[e]){var r,i;if(this.st===void 0){this.st=new Set,t.strings!==void 0&&(this.nt=new Set(t.strings.join(" ").split(/\s/).filter(s=>s!=="")));for(const s in e)e[s]&&!((r=this.nt)!=null&&r.has(s))&&this.st.add(s);return this.render(e)}const n=t.element.classList;for(const s of this.st)s in e||(n.remove(s),this.st.delete(s));for(const s in e){const o=!!e[s];o===this.st.has(s)||(i=this.nt)!=null&&i.has(s)||(o?(n.add(s),this.st.add(s)):(n.remove(s),this.st.delete(s)))}return F}});class fi{constructor(e){this.cle=e}render(){const e=this.cle.titleText?ge`<p class="legend-title">${this.cle.titleText}</p>`:"",n={hidden:this.cle.scaleType==="categorical"},r={hidden:this.cle.scaleType!=="categorical","categorical-container":!0};return ge`<div
      class="cle-container"
      style="width:${this.cle.width}px; height:auto;"
    >
      ${e}
      <slot name="subtitle"></slot>
      <svg
        class=${Ve(n)}
        width=${this.cle.width}
        height=${this.cle.height}
      >
        <!-- discrete and threshold -->
        <g class="rects">${this.renderDiscreteThreshold()}</g>
        <!-- continuous -->
        ${this.renderContinuous()}
        <!-- axis ticks -->
        ${this.renderAxis()}
      </svg>
      <ul class=${Ve(r)}>
        ${this.renderCategorical()}
      </ul>
      <slot name="footer"></slot>
    </div>`}renderCategorical(){if(this.cle.scaleType!=="categorical")return"";const{markType:e,colorScale:n,domain:r}=this.cle,i={"legend-item":!0,line:e==="line",circle:e==="circle"};return ge`${r.map(s=>ge`<li
          class=${Ve(i)}
          style="--color:${n(s)}"
        >
          ${s}
        </li>`)}`}renderContinuous(){var h;if(this.cle.scaleType!=="continuous"||this.cle.colorScale===null)return"";const{colorScale:e,marginTop:n,marginLeft:r,marginRight:i,tickSize:s,width:o,range:a}=this.cle,c=this.cle.marginBottom+s,l=this.cle.height+s,u=((h=e.interpolator)==null?void 0:h.call(e))||Ir(an,a);return J`<image
      x=${r}
      y=${n}
      width=${o-i-r}
      height=${l-n-c}
      preserveAspectRatio="none"
      href=${this.getColorRamp(u).toDataURL()}
    ></image>`}renderDiscreteThreshold(){if(this.cle.scaleType!=="discrete"&&this.cle.scaleType!=="threshold")return"";const{tickSize:e,marginTop:n,marginLeft:r,colorScale:i,xScale:s}=this.cle,o=this.cle.height+e,a=this.cle.marginBottom+e,c=i.range(),l=h=>i.invertExtent(h).map(s)[0]||r,u=h=>{let[f,p]=i.invertExtent(h).map(s);return f=f||0,p=p||s.range()[1],p-f};return J`${c.map(h=>J`<rect x=${l(h)} y=${n} width=${u(h)} height=${o-n-a} fill=${h}></rect>`)}`}renderAxis(){if(!this.cle.xScale||this.cle.scaleType==="categorical")return"";const{ticks:e,tickSize:n,tickFormat:r,tickFormatter:i,tickValues:s,xScale:o,marginTop:a}=this.cle,c=this.cle.height+n,l=this.cle.marginBottom+n,u=s!=null&&s.length?s:o.ticks.apply(o,[e,r]),h=Math.max(n,0)+3,f=()=>u.map(p=>J`<g class="tick" transform='translate(${o(p)},0)'>
      <line stroke="currentColor" y2="${n}" y1="${a+l-c}"></line>
      <text fill="currentColor" y="${h}" dy="0.71em">${i(p)}</text>
      </g>`);return J`<g
      class="x-axis"
      transform="translate(0, ${c-l})"
      text-anchor="middle"
    >${f()}</g>`}getColorRamp(e,n=256){const r=document.createElement("canvas");r.setAttribute("height","1"),r.setAttribute("width",`${n}`);const i=r.getContext("2d");for(let s=0;s<n;s++)i.fillStyle=e(s/(n-1)),i.fillRect(s,0,1,1);return r}}const di=325,pi=32,gi=6,mi=12,yi=16,xi=12,dn=5,$i=6,pn=".1f",bi=[0,1],wi=["#ffffcc","#a1dab4","#41b6c4","#2c7fb8","#253494"],_i="Color Legend Element",Ai="circle",Si="continuous",vi=["domain","range","interpolator","scaleType"],ki=["scaleType","ticks","tickSize","tickValues","tickFormat","tickFormatter","domain","range","marginLeft","marginRight","marginBottom","marginTop","width","height"];class Ei{constructor(e){this.cle=e}setXScale(){const{scaleType:e,marginLeft:n,width:r,marginRight:i}=this.cle;switch(e){case"continuous":this.xScale=Ne().domain(this.cle.domain).range([n,r-i]);break;case"discrete":case"threshold":this.xScale=Ne().domain([this.cle.domain[0],this.cle.domain[this.cle.domain.length-1]]).rangeRound([n,r-i]);break;case"categorical":this.xScale=null;break;default:throw new Error(`Unrecognized scaleType: ${e}`)}}handleAxisTicks(){var e,n,r;if((this.cle.scaleType==="discrete"||this.cle.scaleType==="threshold")&&!this.cle.tickValues){const[i,s]=this.xScale.domain();this.cle.tickValues=[i,...((n=(e=this.cle.colorScale)==null?void 0:e.thresholds)==null?void 0:n.call(e))||this.cle.colorScale.domain(),s]}typeof this.cle.tickFormatter!="function"&&((r=this.cle.tickFormat)!=null&&r.length?this.cle.tickFormatter=rt(this.cle.tickFormat):this.cle.tickFormatter=this.xScale.tickFormat(this.cle.ticks||dn,this.cle.tickFormat||pn))}}const Mi=Tn`
  :host {
    --cle-font-family: sans-serif;
    --cle-font-family-title: var(--cle-font-family);
    --cle-font-size: 0.75rem;
    --cle-font-size-title: 0.875rem;
    --cle-letter-spacing: 0.3px;
    --cle-letter-spacing-title: 0.25px;
    --cle-font-weight: 400;
    --cle-font-weight-title: 500;
    --cle-color: currentColor;
    --cle-background: #fff;
    --cle-padding: 0.375rem;
    --cle-border: none;
    --cle-border-radius: 0;
    --cle-box-sizing: content-box;
    --cle-columns: 2;
    --cle-column-width: auto;
    --cle-item-margin: 0.375rem 0.75rem 0 0;
    --cle-line-width: 24px;
    --cle-line-height: 2px;
    --cle-swatch-size: 10px;
    --cle-swatch-width: var(--cle-swatch-size);
    --cle-swatch-height: var(--cle-swatch-size);
    --cle-swatch-margin: 0 0.5rem 0 0;
  }

  :host([hidden]),
  .hidden {
    display: none !important;
  }

  div.cle-container {
    font-family: var(--cle-font-family);
    font-size: var(--cle-font-size);
    font-weight: var(--cle-font-weight);
    letter-spacing: var(--cle-letter-spacing);
    color: var(--cle-color);
    background: var(--cle-background);
    display: inline-block;
    padding: var(--cle-padding);
    border: var(--cle-border);
    border-radius: var(--cle-border-radius);
    box-sizing: var(--cle-box-sizing);
  }

  svg {
    display: block;
    overflow: visible;
  }

  svg text {
    font-family: var(--cle-font-family);
    font-size: var(--cle-font-size);
    fill: var(--cle-color);
  }

  p.legend-title {
    margin: 0;
    font-family: var(--cle-font-family-title);
    font-size: var(--cle-font-size-title);
    font-weight: var(--cle-font-weight-title);
    letter-spacing: var(--cle-letter-spacing-title);
  }

  ul.categorical-container {
    padding: 0;
    margin: 0;
    column-count: var(--cle-columns);
    column-width: var(--cle-column-width);
  }

  .legend-item {
    display: inline-flex;
    align-items: center;
    margin: var(--cle-item-margin);
  }

  .legend-item::before {
    content: "";
    width: var(--cle-swatch-width);
    height: var(--cle-swatch-height);
    margin: var(--cle-swatch-margin);
    background: var(--color);
  }

  .legend-item.line::before {
    width: var(--cle-line-width);
    height: var(--cle-line-height);
  }

  .legend-item.circle::before {
    border-radius: 50%;
  }
`;var y=function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let g=class extends te{constructor(){super(...arguments),this.titleText=_i,this.width=di,this.height=pi,this.marginTop=gi,this.marginRight=mi,this.marginBottom=yi,this.marginLeft=xi,this.scaleType=Si,this.domain=bi,this.range=wi,this.markType=Ai,this.ticks=dn,this.tickFormat=pn,this.tickSize=$i,this.colorScaleSetter=new ci(this),this.axisTickSetter=new Ei(this),this.renderer=new fi(this)}get interpolator(){return this._interpolator}set interpolator(e){if(typeof e=="function"){const n=this.interpolator;this._interpolator=e,this.requestUpdate("interpolator",n)}else throw new Error("interpolator must be a function.")}get tickFormatter(){return this._tickFormatter}set tickFormatter(e){if(typeof e=="function"){const n=this.tickFormatter;this._tickFormatter=e,this.requestUpdate("tickFormatter",n)}else throw new Error("tickFormatter must be a function.")}get colorScale(){return this.colorScaleSetter.colorScale}get xScale(){return this.axisTickSetter.xScale}render(){return this.renderer.render()}willUpdate(e){vi.some(n=>e.has(n))&&this.colorScaleSetter.setColorScale(),ki.some(n=>e.has(n))&&(this.axisTickSetter.setXScale(),this.axisTickSetter.handleAxisTicks())}};g.styles=[Mi];y([$({type:String})],g.prototype,"titleText",void 0);y([$({type:Number})],g.prototype,"width",void 0);y([$({type:Number})],g.prototype,"height",void 0);y([$({type:Number})],g.prototype,"marginTop",void 0);y([$({type:Number})],g.prototype,"marginRight",void 0);y([$({type:Number})],g.prototype,"marginBottom",void 0);y([$({type:Number})],g.prototype,"marginLeft",void 0);y([$({type:String})],g.prototype,"scaleType",void 0);y([$({type:Array})],g.prototype,"domain",void 0);y([$({type:Array})],g.prototype,"range",void 0);y([$({type:String})],g.prototype,"markType",void 0);y([$({type:Number})],g.prototype,"ticks",void 0);y([$({type:String})],g.prototype,"tickFormat",void 0);y([$({type:Number})],g.prototype,"tickSize",void 0);y([$({type:Array})],g.prototype,"tickValues",void 0);y([Zn("svg")],g.prototype,"svg",void 0);y([$({attribute:!1})],g.prototype,"interpolator",null);y([$({attribute:!1})],g.prototype,"tickFormatter",null);g=y([Wn("color-legend")],g);const Ti={class:"d-flex flex-column fill-height overflow-auto"},Ni=["for"],qi={__name:"EodashLayerControl",props:{map:{type:String,default:"first"},tools:{type:Array,default:()=>["datetime","info","config","legend","opacity"]},cssVars:{type:Object}},setup(t){const e=t,n={tools:e.tools,style:e.cssVars},{selectedCompareStac:r,selectedStac:i}=wn(_n()),s=An(()=>e.map==="second"?ct.value!==null&&r.value!==null:lt.value!==null&&i.value!==null),o=e.map==="second"?$n:bn,a=e.map==="second"?ct:lt,c=Sn(null),l=async f=>{var B;const{layer:p,datetime:m}=f.detail,T=await xn(o,p);let _=[];T&&(await T.fetchCollection(),_=await T.updateLayerJson(m,p.get("id"),e.map));const A=(B=_==null?void 0:_.find(w=>{var Y;return((Y=w==null?void 0:w.properties)==null?void 0:Y.id)==="AnalysisGroup"}))==null?void 0:B.layers;A!=null&&A.length&&(A==null||A.forEach(w=>{w.properties.layerControlExpand=!0,w.properties.layerControlToolsExpand=!0}),a.value.layers=_)};let u;const h=f=>{clearTimeout(u),u=setTimeout(()=>{l(f)},500)};return(f,p)=>(ht(),ut("span",Ti,[s.value?(ht(),ut("eox-layercontrol",vn({key:0},n,{for:kn(a),"onDatetime:updated":h,class:"fill-height",toolsAsList:"true",style:{"--eox-background-color":"transparent"},ref_key:"eoxLayercontrol",ref:c}),null,16,Ni)):En("",!0)]))}};export{qi as default};
