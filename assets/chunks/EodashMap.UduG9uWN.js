import"@eox/map";import"@eox/map/src/plugins/advancedLayersAndSources";import{mapPosition as s,mapEl as B,mapCompareEl as E,datetime as h}from"@/store/states";import{s as v}from"./pinia.mAAL13OY.js";import{useSTAcStore as y}from"@/store/stac";import{eodashCompareCollections as O,eodashCollections as z}from"@/utils/states";import{useHandleMapMoveEnd as T,useInitMap as _}from"@/composables/EodashMap";import{as as C,p as r,h as A,v as L,o as N,c as R,j as M,k as x}from"./framework.Gv4KJFRr.js";function j(e){return 3*e*e-2*e*e*e}const H=[".enabled"],I=[".center",".zoom",".layers"],P=[".layers"],Q={__name:"EodashMap",props:{enableCompare:{type:Boolean,default:!1},center:{type:Array,default:()=>[15,48]},zoom:{type:Number,default:4}},setup(e){var i,p,c,m,u;const o=e,w=C([((i=s.value)==null?void 0:i[0])??((p=o.center)==null?void 0:p[0]),((c=s.value)==null?void 0:c[1])??((m=o.center)==null?void 0:m[1])]),b=C(((u=s.value)==null?void 0:u[2])??o.zoom),l=r([{type:"Tile",source:{type:"OSM"},properties:{id:"osm",title:"Background"}}]),n=r([{type:"Tile",source:{type:"OSM"},properties:{id:"osm",title:"Background"}}]),k={duration:1200,easing:j},a=r(null),t=r(null),{selectedCompareStac:S}=v(y()),g=A(()=>o.enableCompare&&S.value?"":"first");return T(a,s),L(()=>{const{selectedCompareStac:d,selectedStac:f}=v(y());B.value=a.value,o.enableCompare&&(E.value=t.value),o.enableCompare&&_(t,d,O,h,n,a),_(a,f,z,h,l,t)}),(d,f)=>(N(),R("eox-map-compare",{class:"fill-height fill-width overflow-none",".enabled":g.value},[M("eox-map",{class:"fill-height fill-width overflow-none",slot:"first",ref_key:"eoxMap",ref:a,id:"main",".animationOptions":k,".center":x(w),".zoom":x(b),".layers":l.value},null,40,I),M("eox-map",{class:"fill-height fill-width overflow-none",id:"compare",slot:"second",ref_key:"compareMap",ref:t,".layers":n.value},null,40,P)],40,H))}};export{Q as default};
