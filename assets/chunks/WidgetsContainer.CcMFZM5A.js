import{useDefineWidgets as p}from"@/composables/DefineWidgets";import{O as g,h as n,l as y,o as l,c as f,G as x,m as d,t as v,b as E,an as H,ao as k,K as C,Q as w,p as _,F as A}from"./framework.DwvztmCA.js";const L=Symbol.for("vuetify:layout");function S(){const i=g(L);if(!i)throw new Error("[Vuetify] Could not find injected layout");return{getLayoutItem:i.getLayoutItem,mainRect:i.mainRect,mainStyles:i.mainStyles}}class D extends HTMLDetailsElement{constructor(){super()}connectedCallback(){this.el=this,this.summary=this.querySelector("summary"),this.content=this.lastElementChild,this.animation=null,this.isClosing=!1,this.isExpanding=!1,this.summary.addEventListener("click",e=>this.onClick(e))}onClick(e){e==null||e.preventDefault(),this.el.style.overflow="hidden",this.isClosing||!this.el.open?this.doOpen():(this.isExpanding||this.el.open)&&this.shrink()}shrink(){this.isClosing=!0;const e=`${this.el.offsetHeight}px`,t=`${this.summary.offsetHeight}px`;this.animation&&this.animation.cancel(),this.animation=this.el.animate({height:[e,t]},{duration:300,easing:"ease-out"}),this.animation.onfinish=()=>this.onAnimationFinish(!1),this.animation.oncancel=()=>this.isClosing=!1}doOpen(){this.el.style.height=`${this.el.offsetHeight}px`,this.el.open=!0,window.requestAnimationFrame(()=>this.expand()),this.parentElement.querySelectorAll("details[open][exclusive]").forEach(t=>{t!==this&&t.onClick()})}expand(){this.isExpanding=!0;const e=`${this.el.offsetHeight}px`,t=`${this.summary.offsetHeight+this.content.offsetHeight}px`;this.animation&&this.animation.cancel(),this.animation=this.el.animate({height:[e,t]},{duration:300,easing:"ease-out"}),this.animation.onfinish=()=>this.onAnimationFinish(!0),this.animation.oncancel=()=>this.isExpanding=!1}onAnimationFinish(e){this.el.open=e,this.animation=null,this.isClosing=!1,this.isExpanding=!1,this.el.style.height=this.el.style.overflow=""}}customElements.define("animated-details",D,{extends:"details"});const $={__name:"WidgetsContainer",props:{widgets:{type:Array,required:!0}},setup(i){const t=p(i.widgets),r=n([]),h=n([]),u=n(""),c=n(0);return y(()=>{var a;c.value=h.value.reduce((s,o)=>s+=o.clientHeight,0);const{mainRect:m}=S();u.value=(((a=r.value[0].parentElement)==null?void 0:a.scrollHeight)??0)-c.value-m.value.top+"px"}),(m,a)=>(l(!0),f(A,null,x(_(t),(s,o)=>(l(),f("details",{is:"animated-details",ref_for:!0,ref_key:"detailsEls",ref:r,key:o,class:"overflow-auto",exclusive:""},[d("summary",{ref_for:!0,ref_key:"summaryEls",ref:h},v(s.value.title),513),d("span",{style:w({height:u.value}),class:"d-flex flex-column"},[(l(),E(C(s.value.component),H(k(s.value.props)),null,16))],4)]))),128))}};export{$ as default};
