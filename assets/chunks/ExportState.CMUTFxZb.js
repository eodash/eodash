import{_ as A,aL as O,aM as j,p as z,C as a,b as I,o as m,w as n,G as t,j as o,c as g,e as C,F as J,B as P,aq as q,k as u,a as S,t as x,aN as D}from"./framework.javlGjwI.js";import{f as U,g as G}from"./mdi.DYQAPNRw.js";import H from"./PopUp.B58JdMlX.js";import{copyToClipBoard as y}from"@/utils";import{getLayers as K}from"@/store/actions";import{chartSpec as v,mapPosition as w,availableMapProjection as $}from"@/store/states";import{removeUnneededProperties as h}from"@/eodashSTAC/helpers";import{base64EncodeSpec as Q}from"@eox/chart";import"@/composables/DefineWidgets";const R={class:"d-flex flex-wrap gap-2 mb-4"},W={style:{position:"absolute",bottom:"15px"}},X={key:0,class:"text-success mr-3"},Y={class:"pa-3 code-block mb-4"},Z={key:0,class:"mb-4"},ee={class:"pa-3 code-block"},te={__name:"ExportState",props:O({getLayers:{type:Function,default:K}},{modelValue:{type:Boolean,required:!0,default:!1},modelModifiers:{}}),emits:["update:modelValue"],setup(_){const d=j(_,"modelValue"),f=_,l=z(!1),k=[{id:Symbol(),copyFn:async()=>await y(V(),l),copyAs:"simple map"},{id:Symbol(),copyFn:async()=>await y(JSON.stringify(f.getLayers()),l),copyAs:"layers configuration"},{id:Symbol(),copyFn:async()=>await y(T(),l),copyAs:"map tour section"},{id:Symbol(),copyFn:async()=>await y(b(),l),copyAs:"chart",showIf:()=>v.value}],T=()=>{const[c,e,r]=w.value,i="### <!--{ layers=",p=`zoom="${r}" center=[${[c,e]}] projection="${$.value}" animationOptions={duration:500}}-->
#### Tour step title
Text describing the current step of the tour and why it is interesting what the map shows currently
`;return`${i}'${JSON.stringify(h(f.getLayers()))}' ${p}`},V=()=>{const[c,e,r]=w.value,i='## Map Example <!--{as="eox-map" style="width: 100%; height: 500px;" layers=',p=`zoom="${r}" center=[${[c,e]}] projection="${$.value}" }-->`;return`${i}'${JSON.stringify(h(f.getLayers()))}' ${p}`},b=()=>{if(!v.value)return"";const c='## Chart Example <!--{as="eox-chart" style="height: 400px;" spec=',e=" }-->",r=Q(v.value);return`${c}'${r}'${e}`};return(c,e)=>{const r=a("v-card-title"),i=a("v-btn"),p=a("v-icon"),L=a("v-expand-transition"),M=a("v-card-text"),B=a("v-divider"),E=a("v-spacer"),F=a("v-card-actions"),N=a("v-card");return m(),I(H,{modelValue:d.value,"onUpdate:modelValue":e[1]||(e[1]=s=>d.value=s)},{default:n(()=>[t(N,{style:{"max-height":"498px"}},{default:n(()=>[t(r,{class:"bg-primary",style:{"max-height":"49px"}},{default:n(()=>[...e[2]||(e[2]=[o("h5",{class:"text-h5"},"Storytelling map configuration",-1)])]),_:1}),t(M,{class:"py-5 overflow-auto",style:{height:"400px"}},{default:n(()=>[o("div",R,[(m(),g(J,null,P(k,s=>q(t(i,{class:"text-body-2",onClick:s.copyFn,key:s.id,small:"",variant:"text","prepend-icon":[u(U)]},{default:n(()=>[S(" copy as "+x(s.copyAs),1)]),_:2},1032,["onClick","prepend-icon"]),[[D,!s.showIf||s.showIf()]])),64))]),o("div",W,[t(L,null,{default:n(()=>[l.value?(m(),g("div",X,[t(p,{color:"success",left:"",icon:[u(G)]},null,8,["icon"]),e[3]||(e[3]=o("small",null,"copied!",-1))])):C("",!0)]),_:1})]),e[5]||(e[5]=o("p",{class:"text-body-2 mb-2"},[o("strong",null,"Map Layers Configuration")],-1)),o("div",Y,x(u(h)(_.getLayers())),1),u(v)?(m(),g("div",Z,[e[4]||(e[4]=o("p",{class:"text-body-2 mb-2"},[o("strong",null,"Chart Spec (for export)")],-1)),o("div",ee,x(b()),1)])):C("",!0)]),_:1}),t(B),t(F,{style:{"max-height":"49px"}},{default:n(()=>[t(E),t(i,{variant:"text",onClick:e[0]||(e[0]=s=>d.value=!d.value)},{default:n(()=>[...e[6]||(e[6]=[S(" Close ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},de=A(te,[["__scopeId","data-v-8dfce001"]]);export{de as default};
