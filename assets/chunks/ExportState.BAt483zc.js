import{_ as A,aL as O,aM as j,p as z,C as n,b as I,o as y,w as i,G as a,j as s,c as f,e as S,F as J,B as P,aq as q,k as g,a as b,t as x,aN as D}from"./framework.QYKR7UOp.js";import{d as U,e as G}from"./mdi.egAaFUN7.js";import H from"./PopUp.Bla453rR.js";import{copyToClipBoard as _}from"@/utils";import{getChartSpec as K,getLayers as Q}from"@/store/actions";import{mapPosition as w,availableMapProjection as $}from"@/store/states";import{removeUnneededProperties as h}from"@/eodashSTAC/helpers";import{base64EncodeSpec as R}from"@eox/chart";import"@/composables/DefineWidgets";const W={class:"d-flex flex-wrap gap-2 mb-4"},X={style:{position:"absolute",bottom:"15px"}},Y={key:0,class:"text-success mr-3"},Z={class:"pa-3 code-block mb-4"},ee={key:0,class:"mb-4"},te={class:"pa-3 code-block"},oe={__name:"ExportState",props:O({getLayers:{type:Function,default:Q},getChartSpec:{type:Function,default:K}},{modelValue:{type:Boolean,required:!0,default:!1},modelModifiers:{}}),emits:["update:modelValue"],setup(v){const u=j(v,"modelValue"),t=v,p=z(!1),k=[{id:Symbol(),copyFn:async()=>await _(V(),p),copyAs:"simple map"},{id:Symbol(),copyFn:async()=>await _(JSON.stringify(t.getLayers()),p),copyAs:"layers configuration"},{id:Symbol(),copyFn:async()=>await _(T(),p),copyAs:"map tour section"},{id:Symbol(),copyFn:async()=>await _(C(),p),copyAs:"chart",showIf:()=>{var o;return!!((o=t.getChartSpec)!=null&&o.call(t))}}],T=()=>{const[o,e,l]=w.value,r="### <!--{ layers=",c=`zoom="${l}" center=[${[o,e]}] projection="${$.value}" animationOptions={duration:500}}-->
#### Tour step title
Text describing the current step of the tour and why it is interesting what the map shows currently
`;return`${r}'${JSON.stringify(h(t.getLayers()))}' ${c}`},V=()=>{const[o,e,l]=w.value,r='## Map Example <!--{as="eox-map" style="width: 100%; height: 500px;" layers=',c=`zoom="${l}" center=[${[o,e]}] projection="${$.value}" }-->`;return`${r}'${JSON.stringify(h(t.getLayers()))}' ${c}`},C=()=>{var c;const o=(c=t.getChartSpec)==null?void 0:c.call(t);if(!o)return"";const e='## Chart Example <!--{as="eox-chart" style="height: 300px;" spec=',l=" }-->",r=R(o);return`${e}'${r}'${l}`};return(o,e)=>{const l=n("v-card-title"),r=n("v-btn"),c=n("v-icon"),F=n("v-expand-transition"),L=n("v-card-text"),M=n("v-divider"),B=n("v-spacer"),E=n("v-card-actions"),N=n("v-card");return y(),I(H,{modelValue:u.value,"onUpdate:modelValue":e[1]||(e[1]=d=>u.value=d)},{default:i(()=>[a(N,{style:{"max-height":"498px"}},{default:i(()=>[a(l,{class:"bg-primary",style:{"max-height":"49px"}},{default:i(()=>[...e[2]||(e[2]=[s("h5",{class:"text-h5"},"Storytelling map configuration",-1)])]),_:1}),a(L,{class:"py-5 overflow-auto",style:{height:"400px"}},{default:i(()=>{var d;return[s("div",W,[(y(),f(J,null,P(k,m=>q(a(r,{class:"text-body-2",onClick:m.copyFn,key:m.id,small:"",variant:"text","prepend-icon":[g(U)]},{default:i(()=>[b(" copy as "+x(m.copyAs),1)]),_:2},1032,["onClick","prepend-icon"]),[[D,!m.showIf||m.showIf()]])),64))]),s("div",X,[a(F,null,{default:i(()=>[p.value?(y(),f("div",Y,[a(c,{color:"success",left:"",icon:[g(G)]},null,8,["icon"]),e[3]||(e[3]=s("small",null,"copied!",-1))])):S("",!0)]),_:1})]),e[5]||(e[5]=s("p",{class:"text-body-2 mb-2"},[s("strong",null,"Map Layers Configuration")],-1)),s("div",Z,x(g(h)(v.getLayers())),1),(d=t.getChartSpec)!=null&&d.call(t)?(y(),f("div",ee,[e[4]||(e[4]=s("p",{class:"text-body-2 mb-2"},[s("strong",null,"Chart Spec (for export)")],-1)),s("div",te,x(C()),1)])):S("",!0)]}),_:1}),a(M),a(E,{style:{"max-height":"49px"}},{default:i(()=>[a(B),a(r,{variant:"text",onClick:e[0]||(e[0]=d=>u.value=!u.value)},{default:i(()=>[...e[6]||(e[6]=[b(" Close ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},me=A(oe,[["__scopeId","data-v-069734de"]]);export{me as default};
