import"@eox/layercontrol";import"@eox/jsonform";import"@eox/timecontrol";import{mapCompareEl as ce,mapEl as le}from"@/store/states";import{getColFromLayer as xn}from"@/eodashSTAC/helpers";import{eodashCompareCollections as $n,eodashCollections as bn}from"@/utils/states";import{s as wn}from"./pinia.CFKZge00.js";import{useSTAcStore as vn}from"@/store/stac";import{h as _n,p as An,o as he,c as ue,K as Sn,k as kn,e as En}from"./framework.B09hBYeo.js";/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const $t=globalThis,Zt=$t.ShadowRoot&&($t.ShadyCSS===void 0||$t.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,Jt=Symbol(),fe=new WeakMap;let Fe=class{constructor(t,n,r){if(this._$cssResult$=!0,r!==Jt)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=n}get styleSheet(){let t=this.o;const n=this.t;if(Zt&&t===void 0){const r=n!==void 0&&n.length===1;r&&(t=fe.get(n)),t===void 0&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),r&&fe.set(n,t))}return t}toString(){return this.cssText}};const Mn=e=>new Fe(typeof e=="string"?e:e+"",void 0,Jt),Tn=(e,...t)=>{const n=e.length===1?e[0]:t.reduce((r,i,s)=>r+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(i)+e[s+1],e[0]);return new Fe(n,e,Jt)},Nn=(e,t)=>{if(Zt)e.adoptedStyleSheets=t.map(n=>n instanceof CSSStyleSheet?n:n.styleSheet);else for(const n of t){const r=document.createElement("style"),i=$t.litNonce;i!==void 0&&r.setAttribute("nonce",i),r.textContent=n.cssText,e.appendChild(r)}},de=Zt?e=>e:e=>e instanceof CSSStyleSheet?(t=>{let n="";for(const r of t.cssRules)n+=r.cssText;return Mn(n)})(e):e;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:Cn,defineProperty:Pn,getOwnPropertyDescriptor:Rn,getOwnPropertyNames:Un,getOwnPropertySymbols:On,getPrototypeOf:Hn}=Object,U=globalThis,pe=U.trustedTypes,Ln=pe?pe.emptyScript:"",Ot=U.reactiveElementPolyfillSupport,Q=(e,t)=>e,wt={toAttribute(e,t){switch(t){case Boolean:e=e?Ln:null;break;case Object:case Array:e=e==null?e:JSON.stringify(e)}return e},fromAttribute(e,t){let n=e;switch(t){case Boolean:n=e!==null;break;case Number:n=e===null?null:Number(e);break;case Object:case Array:try{n=JSON.parse(e)}catch{n=null}}return n}},Qt=(e,t)=>!Cn(e,t),ge={attribute:!0,type:String,converter:wt,reflect:!1,hasChanged:Qt};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),U.litPropertyMetadata??(U.litPropertyMetadata=new WeakMap);let V=class extends HTMLElement{static addInitializer(t){this._$Ei(),(this.l??(this.l=[])).push(t)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(t,n=ge){if(n.state&&(n.attribute=!1),this._$Ei(),this.elementProperties.set(t,n),!n.noAccessor){const r=Symbol(),i=this.getPropertyDescriptor(t,r,n);i!==void 0&&Pn(this.prototype,t,i)}}static getPropertyDescriptor(t,n,r){const{get:i,set:s}=Rn(this.prototype,t)??{get(){return this[n]},set(o){this[n]=o}};return{get(){return i==null?void 0:i.call(this)},set(o){const a=i==null?void 0:i.call(this);s.call(this,o),this.requestUpdate(t,a,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)??ge}static _$Ei(){if(this.hasOwnProperty(Q("elementProperties")))return;const t=Hn(this);t.finalize(),t.l!==void 0&&(this.l=[...t.l]),this.elementProperties=new Map(t.elementProperties)}static finalize(){if(this.hasOwnProperty(Q("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(Q("properties"))){const n=this.properties,r=[...Un(n),...On(n)];for(const i of r)this.createProperty(i,n[i])}const t=this[Symbol.metadata];if(t!==null){const n=litPropertyMetadata.get(t);if(n!==void 0)for(const[r,i]of n)this.elementProperties.set(r,i)}this._$Eh=new Map;for(const[n,r]of this.elementProperties){const i=this._$Eu(n,r);i!==void 0&&this._$Eh.set(i,n)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(t){const n=[];if(Array.isArray(t)){const r=new Set(t.flat(1/0).reverse());for(const i of r)n.unshift(de(i))}else t!==void 0&&n.push(de(t));return n}static _$Eu(t,n){const r=n.attribute;return r===!1?void 0:typeof r=="string"?r:typeof t=="string"?t.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var t;this._$ES=new Promise(n=>this.enableUpdating=n),this._$AL=new Map,this._$E_(),this.requestUpdate(),(t=this.constructor.l)==null||t.forEach(n=>n(this))}addController(t){var n;(this._$EO??(this._$EO=new Set)).add(t),this.renderRoot!==void 0&&this.isConnected&&((n=t.hostConnected)==null||n.call(t))}removeController(t){var n;(n=this._$EO)==null||n.delete(t)}_$E_(){const t=new Map,n=this.constructor.elementProperties;for(const r of n.keys())this.hasOwnProperty(r)&&(t.set(r,this[r]),delete this[r]);t.size>0&&(this._$Ep=t)}createRenderRoot(){const t=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return Nn(t,this.constructor.elementStyles),t}connectedCallback(){var t;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(t=this._$EO)==null||t.forEach(n=>{var r;return(r=n.hostConnected)==null?void 0:r.call(n)})}enableUpdating(t){}disconnectedCallback(){var t;(t=this._$EO)==null||t.forEach(n=>{var r;return(r=n.hostDisconnected)==null?void 0:r.call(n)})}attributeChangedCallback(t,n,r){this._$AK(t,r)}_$EC(t,n){var s;const r=this.constructor.elementProperties.get(t),i=this.constructor._$Eu(t,r);if(i!==void 0&&r.reflect===!0){const o=(((s=r.converter)==null?void 0:s.toAttribute)!==void 0?r.converter:wt).toAttribute(n,r.type);this._$Em=t,o==null?this.removeAttribute(i):this.setAttribute(i,o),this._$Em=null}}_$AK(t,n){var s;const r=this.constructor,i=r._$Eh.get(t);if(i!==void 0&&this._$Em!==i){const o=r.getPropertyOptions(i),a=typeof o.converter=="function"?{fromAttribute:o.converter}:((s=o.converter)==null?void 0:s.fromAttribute)!==void 0?o.converter:wt;this._$Em=i,this[i]=a.fromAttribute(n,o.type),this._$Em=null}}requestUpdate(t,n,r){if(t!==void 0){if(r??(r=this.constructor.getPropertyOptions(t)),!(r.hasChanged??Qt)(this[t],n))return;this.P(t,n,r)}this.isUpdatePending===!1&&(this._$ES=this._$ET())}P(t,n,r){this._$AL.has(t)||this._$AL.set(t,n),r.reflect===!0&&this._$Em!==t&&(this._$Ej??(this._$Ej=new Set)).add(t)}async _$ET(){this.isUpdatePending=!0;try{await this._$ES}catch(n){Promise.reject(n)}const t=this.scheduleUpdate();return t!=null&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var r;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[s,o]of this._$Ep)this[s]=o;this._$Ep=void 0}const i=this.constructor.elementProperties;if(i.size>0)for(const[s,o]of i)o.wrapped!==!0||this._$AL.has(s)||this[s]===void 0||this.P(s,this[s],o)}let t=!1;const n=this._$AL;try{t=this.shouldUpdate(n),t?(this.willUpdate(n),(r=this._$EO)==null||r.forEach(i=>{var s;return(s=i.hostUpdate)==null?void 0:s.call(i)}),this.update(n)):this._$EU()}catch(i){throw t=!1,this._$EU(),i}t&&this._$AE(n)}willUpdate(t){}_$AE(t){var n;(n=this._$EO)==null||n.forEach(r=>{var i;return(i=r.hostUpdated)==null?void 0:i.call(r)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(t){return!0}update(t){this._$Ej&&(this._$Ej=this._$Ej.forEach(n=>this._$EC(n,this[n]))),this._$EU()}updated(t){}firstUpdated(t){}};V.elementStyles=[],V.shadowRootOptions={mode:"open"},V[Q("elementProperties")]=new Map,V[Q("finalized")]=new Map,Ot==null||Ot({ReactiveElement:V}),(U.reactiveElementVersions??(U.reactiveElementVersions=[])).push("2.0.4");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const tt=globalThis,vt=tt.trustedTypes,me=vt?vt.createPolicy("lit-html",{createHTML:e=>e}):void 0,je="$lit$",P=`lit$${Math.random().toFixed(9).slice(2)}$`,Be="?"+P,zn=`<${Be}>`,D=document,rt=()=>D.createComment(""),it=e=>e===null||typeof e!="object"&&typeof e!="function",te=Array.isArray,In=e=>te(e)||typeof(e==null?void 0:e[Symbol.iterator])=="function",Ht=`[ 	
\f\r]`,Z=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,ye=/-->/g,xe=/>/g,H=RegExp(`>|${Ht}(?:([^\\s"'>=/]+)(${Ht}*=${Ht}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),$e=/'/g,be=/"/g,qe=/^(?:script|style|textarea|title)$/i,Ve=e=>(t,...n)=>({_$litType$:e,strings:t,values:n}),gt=Ve(1),J=Ve(2),F=Symbol.for("lit-noChange"),x=Symbol.for("lit-nothing"),we=new WeakMap,L=D.createTreeWalker(D,129);function Ge(e,t){if(!te(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return me!==void 0?me.createHTML(t):t}const Dn=(e,t)=>{const n=e.length-1,r=[];let i,s=t===2?"<svg>":t===3?"<math>":"",o=Z;for(let a=0;a<n;a++){const c=e[a];let l,u,h=-1,f=0;for(;f<c.length&&(o.lastIndex=f,u=o.exec(c),u!==null);)f=o.lastIndex,o===Z?u[1]==="!--"?o=ye:u[1]!==void 0?o=xe:u[2]!==void 0?(qe.test(u[2])&&(i=RegExp("</"+u[2],"g")),o=H):u[3]!==void 0&&(o=H):o===H?u[0]===">"?(o=i??Z,h=-1):u[1]===void 0?h=-2:(h=o.lastIndex-u[2].length,l=u[1],o=u[3]===void 0?H:u[3]==='"'?be:$e):o===be||o===$e?o=H:o===ye||o===xe?o=Z:(o=H,i=void 0);const p=o===H&&e[a+1].startsWith("/>")?" ":"";s+=o===Z?c+zn:h>=0?(r.push(l),c.slice(0,h)+je+c.slice(h)+P+p):c+P+(h===-2?a:p)}return[Ge(e,s+(e[n]||"<?>")+(t===2?"</svg>":t===3?"</math>":"")),r]};class st{constructor({strings:t,_$litType$:n},r){let i;this.parts=[];let s=0,o=0;const a=t.length-1,c=this.parts,[l,u]=Dn(t,n);if(this.el=st.createElement(l,r),L.currentNode=this.el.content,n===2||n===3){const h=this.el.content.firstChild;h.replaceWith(...h.childNodes)}for(;(i=L.nextNode())!==null&&c.length<a;){if(i.nodeType===1){if(i.hasAttributes())for(const h of i.getAttributeNames())if(h.endsWith(je)){const f=u[o++],p=i.getAttribute(h).split(P),m=/([.?@])?(.*)/.exec(f);c.push({type:1,index:s,name:m[2],strings:p,ctor:m[1]==="."?jn:m[1]==="?"?Bn:m[1]==="@"?qn:Ct}),i.removeAttribute(h)}else h.startsWith(P)&&(c.push({type:6,index:s}),i.removeAttribute(h));if(qe.test(i.tagName)){const h=i.textContent.split(P),f=h.length-1;if(f>0){i.textContent=vt?vt.emptyScript:"";for(let p=0;p<f;p++)i.append(h[p],rt()),L.nextNode(),c.push({type:2,index:++s});i.append(h[f],rt())}}}else if(i.nodeType===8)if(i.data===Be)c.push({type:2,index:s});else{let h=-1;for(;(h=i.data.indexOf(P,h+1))!==-1;)c.push({type:7,index:s}),h+=P.length-1}s++}}static createElement(t,n){const r=D.createElement("template");return r.innerHTML=t,r}}function X(e,t,n=e,r){var o,a;if(t===F)return t;let i=r!==void 0?(o=n._$Co)==null?void 0:o[r]:n._$Cl;const s=it(t)?void 0:t._$litDirective$;return(i==null?void 0:i.constructor)!==s&&((a=i==null?void 0:i._$AO)==null||a.call(i,!1),s===void 0?i=void 0:(i=new s(e),i._$AT(e,n,r)),r!==void 0?(n._$Co??(n._$Co=[]))[r]=i:n._$Cl=i),i!==void 0&&(t=X(e,i._$AS(e,t.values),i,r)),t}class Fn{constructor(t,n){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){const{el:{content:n},parts:r}=this._$AD,i=((t==null?void 0:t.creationScope)??D).importNode(n,!0);L.currentNode=i;let s=L.nextNode(),o=0,a=0,c=r[0];for(;c!==void 0;){if(o===c.index){let l;c.type===2?l=new lt(s,s.nextSibling,this,t):c.type===1?l=new c.ctor(s,c.name,c.strings,this,t):c.type===6&&(l=new Vn(s,this,t)),this._$AV.push(l),c=r[++a]}o!==(c==null?void 0:c.index)&&(s=L.nextNode(),o++)}return L.currentNode=D,i}p(t){let n=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(t,r,n),n+=r.strings.length-2):r._$AI(t[n])),n++}}class lt{get _$AU(){var t;return((t=this._$AM)==null?void 0:t._$AU)??this._$Cv}constructor(t,n,r,i){this.type=2,this._$AH=x,this._$AN=void 0,this._$AA=t,this._$AB=n,this._$AM=r,this.options=i,this._$Cv=(i==null?void 0:i.isConnected)??!0}get parentNode(){let t=this._$AA.parentNode;const n=this._$AM;return n!==void 0&&(t==null?void 0:t.nodeType)===11&&(t=n.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,n=this){t=X(this,t,n),it(t)?t===x||t==null||t===""?(this._$AH!==x&&this._$AR(),this._$AH=x):t!==this._$AH&&t!==F&&this._(t):t._$litType$!==void 0?this.$(t):t.nodeType!==void 0?this.T(t):In(t)?this.k(t):this._(t)}O(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.O(t))}_(t){this._$AH!==x&&it(this._$AH)?this._$AA.nextSibling.data=t:this.T(D.createTextNode(t)),this._$AH=t}$(t){var s;const{values:n,_$litType$:r}=t,i=typeof r=="number"?this._$AC(t):(r.el===void 0&&(r.el=st.createElement(Ge(r.h,r.h[0]),this.options)),r);if(((s=this._$AH)==null?void 0:s._$AD)===i)this._$AH.p(n);else{const o=new Fn(i,this),a=o.u(this.options);o.p(n),this.T(a),this._$AH=o}}_$AC(t){let n=we.get(t.strings);return n===void 0&&we.set(t.strings,n=new st(t)),n}k(t){te(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let r,i=0;for(const s of t)i===n.length?n.push(r=new lt(this.O(rt()),this.O(rt()),this,this.options)):r=n[i],r._$AI(s),i++;i<n.length&&(this._$AR(r&&r._$AB.nextSibling,i),n.length=i)}_$AR(t=this._$AA.nextSibling,n){var r;for((r=this._$AP)==null?void 0:r.call(this,!1,!0,n);t&&t!==this._$AB;){const i=t.nextSibling;t.remove(),t=i}}setConnected(t){var n;this._$AM===void 0&&(this._$Cv=t,(n=this._$AP)==null||n.call(this,t))}}class Ct{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(t,n,r,i,s){this.type=1,this._$AH=x,this._$AN=void 0,this.element=t,this.name=n,this._$AM=i,this.options=s,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=x}_$AI(t,n=this,r,i){const s=this.strings;let o=!1;if(s===void 0)t=X(this,t,n,0),o=!it(t)||t!==this._$AH&&t!==F,o&&(this._$AH=t);else{const a=t;let c,l;for(t=s[0],c=0;c<s.length-1;c++)l=X(this,a[r+c],n,c),l===F&&(l=this._$AH[c]),o||(o=!it(l)||l!==this._$AH[c]),l===x?t=x:t!==x&&(t+=(l??"")+s[c+1]),this._$AH[c]=l}o&&!i&&this.j(t)}j(t){t===x?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??"")}}class jn extends Ct{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===x?void 0:t}}class Bn extends Ct{constructor(){super(...arguments),this.type=4}j(t){this.element.toggleAttribute(this.name,!!t&&t!==x)}}class qn extends Ct{constructor(t,n,r,i,s){super(t,n,r,i,s),this.type=5}_$AI(t,n=this){if((t=X(this,t,n,0)??x)===F)return;const r=this._$AH,i=t===x&&r!==x||t.capture!==r.capture||t.once!==r.once||t.passive!==r.passive,s=t!==x&&(r===x||i);i&&this.element.removeEventListener(this.name,this,r),s&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var n;typeof this._$AH=="function"?this._$AH.call(((n=this.options)==null?void 0:n.host)??this.element,t):this._$AH.handleEvent(t)}}class Vn{constructor(t,n,r){this.element=t,this.type=6,this._$AN=void 0,this._$AM=n,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(t){X(this,t)}}const Lt=tt.litHtmlPolyfillSupport;Lt==null||Lt(st,lt),(tt.litHtmlVersions??(tt.litHtmlVersions=[])).push("3.2.1");const Gn=(e,t,n)=>{const r=(n==null?void 0:n.renderBefore)??t;let i=r._$litPart$;if(i===void 0){const s=(n==null?void 0:n.renderBefore)??null;r._$litPart$=i=new lt(t.insertBefore(rt(),s),s,void 0,n??{})}return i._$AI(e),i};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */let et=class extends V{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var n;const t=super.createRenderRoot();return(n=this.renderOptions).renderBefore??(n.renderBefore=t.firstChild),t}update(t){const n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=Gn(n,this.renderRoot,this.renderOptions)}connectedCallback(){var t;super.connectedCallback(),(t=this._$Do)==null||t.setConnected(!0)}disconnectedCallback(){var t;super.disconnectedCallback(),(t=this._$Do)==null||t.setConnected(!1)}render(){return F}};var De;et._$litElement$=!0,et.finalized=!0,(De=globalThis.litElementHydrateSupport)==null||De.call(globalThis,{LitElement:et});const zt=globalThis.litElementPolyfillSupport;zt==null||zt({LitElement:et});(globalThis.litElementVersions??(globalThis.litElementVersions=[])).push("4.1.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Wn=e=>(t,n)=>{n!==void 0?n.addInitializer(()=>{customElements.define(e,t)}):customElements.define(e,t)};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Xn={attribute:!0,type:String,converter:wt,reflect:!1,hasChanged:Qt},Kn=(e=Xn,t,n)=>{const{kind:r,metadata:i}=n;let s=globalThis.litPropertyMetadata.get(i);if(s===void 0&&globalThis.litPropertyMetadata.set(i,s=new Map),s.set(n.name,e),r==="accessor"){const{name:o}=n;return{set(a){const c=t.get.call(this);t.set.call(this,a),this.requestUpdate(o,c,e)},init(a){return a!==void 0&&this.P(o,void 0,e),a}}}if(r==="setter"){const{name:o}=n;return function(a){const c=this[o];t.call(this,a),this.requestUpdate(o,c,e)}}throw Error("Unsupported decorator location: "+r)};function $(e){return(t,n)=>typeof n=="object"?Kn(e,t,n):((r,i,s)=>{const o=i.hasOwnProperty(s);return i.constructor.createProperty(s,o?{...r,wrapped:!0}:r),o?Object.getOwnPropertyDescriptor(i,s):void 0})(e,t,n)}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Yn=(e,t,n)=>(n.configurable=!0,n.enumerable=!0,Reflect.decorate&&typeof t!="object"&&Object.defineProperty(e,t,n),n);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function Zn(e,t){return(n,r,i)=>{const s=o=>{var a;return((a=o.renderRoot)==null?void 0:a.querySelector(e))??null};return Yn(n,r,{get(){return s(this)}})}}function bt(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Jn(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function We(e){let t,n,r;e.length!==2?(t=bt,n=(a,c)=>bt(e(a),c),r=(a,c)=>e(a)-c):(t=e===bt||e===Jn?e:Qn,n=e,r=e);function i(a,c,l=0,u=a.length){if(l<u){if(t(c,c)!==0)return u;do{const h=l+u>>>1;n(a[h],c)<0?l=h+1:u=h}while(l<u)}return l}function s(a,c,l=0,u=a.length){if(l<u){if(t(c,c)!==0)return u;do{const h=l+u>>>1;n(a[h],c)<=0?l=h+1:u=h}while(l<u)}return l}function o(a,c,l=0,u=a.length){const h=i(a,c,l,u-1);return h>l&&r(a[h-1],c)>-r(a[h],c)?h-1:h}return{left:i,center:o,right:s}}function Qn(){return 0}function tr(e){return e===null?NaN:+e}const er=We(bt),ee=er.right;We(tr).center;class ve extends Map{constructor(t,n=ir){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(_e(this,t))}has(t){return super.has(_e(this,t))}set(t,n){return super.set(nr(this,t),n)}delete(t){return super.delete(rr(this,t))}}function _e({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function nr({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function rr({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function ir(e){return e!==null&&typeof e=="object"?e.valueOf():e}const sr=Math.sqrt(50),or=Math.sqrt(10),ar=Math.sqrt(2);function _t(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=sr?10:s>=or?5:s>=ar?2:1;let a,c,l;return i<0?(l=Math.pow(10,-i)/o,a=Math.round(e*l),c=Math.round(t*l),a/l<e&&++a,c/l>t&&--c,l=-l):(l=Math.pow(10,i)*o,a=Math.round(e/l),c=Math.round(t/l),a*l<e&&++a,c*l>t&&--c),c<a&&.5<=n&&n<2?_t(e,t,n*2):[a,c,l]}function cr(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,o]=r?_t(t,e,n):_t(e,t,n);if(!(s>=i))return[];const a=s-i+1,c=new Array(a);if(r)if(o<0)for(let l=0;l<a;++l)c[l]=(s-l)/-o;else for(let l=0;l<a;++l)c[l]=(s-l)*o;else if(o<0)for(let l=0;l<a;++l)c[l]=(i+l)/-o;else for(let l=0;l<a;++l)c[l]=(i+l)*o;return c}function Gt(e,t,n){return t=+t,e=+e,n=+n,_t(e,t,n)[2]}function lr(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?Gt(t,e,n):Gt(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function Pt(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function hr(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Ae=Symbol("implicit");function Xe(){var e=new ve,t=[],n=[],r=Ae;function i(s){let o=e.get(s);if(o===void 0){if(r!==Ae)return r;e.set(s,o=t.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new ve;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return Xe(t,n).unknown(r)},Pt.apply(i,arguments),i}function ht(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Rt(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function j(){}var ot=.7,At=1/ot,G="\\s*([+-]?\\d+)\\s*",at="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",E="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ur=/^#([0-9a-f]{3,8})$/,fr=new RegExp(`^rgb\\(${G},${G},${G}\\)$`),dr=new RegExp(`^rgb\\(${E},${E},${E}\\)$`),pr=new RegExp(`^rgba\\(${G},${G},${G},${at}\\)$`),gr=new RegExp(`^rgba\\(${E},${E},${E},${at}\\)$`),mr=new RegExp(`^hsl\\(${at},${E},${E}\\)$`),yr=new RegExp(`^hsla\\(${at},${E},${E},${at}\\)$`),Se={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ht(j,ct,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:ke,formatHex:ke,formatHex8:xr,formatHsl:$r,formatRgb:Ee,toString:Ee});function ke(){return this.rgb().formatHex()}function xr(){return this.rgb().formatHex8()}function $r(){return Ye(this).formatHsl()}function Ee(){return this.rgb().formatRgb()}function ct(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=ur.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Me(t):n===3?new b(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?mt(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?mt(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=fr.exec(e))?new b(t[1],t[2],t[3],1):(t=dr.exec(e))?new b(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=pr.exec(e))?mt(t[1],t[2],t[3],t[4]):(t=gr.exec(e))?mt(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=mr.exec(e))?Ce(t[1],t[2]/100,t[3]/100,1):(t=yr.exec(e))?Ce(t[1],t[2]/100,t[3]/100,t[4]):Se.hasOwnProperty(e)?Me(Se[e]):e==="transparent"?new b(NaN,NaN,NaN,0):null}function Me(e){return new b(e>>16&255,e>>8&255,e&255,1)}function mt(e,t,n,r){return r<=0&&(e=t=n=NaN),new b(e,t,n,r)}function Ke(e){return e instanceof j||(e=ct(e)),e?(e=e.rgb(),new b(e.r,e.g,e.b,e.opacity)):new b}function Wt(e,t,n,r){return arguments.length===1?Ke(e):new b(e,t,n,r??1)}function b(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}ht(b,Wt,Rt(j,{brighter(e){return e=e==null?At:Math.pow(At,e),new b(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?ot:Math.pow(ot,e),new b(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new b(I(this.r),I(this.g),I(this.b),St(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Te,formatHex:Te,formatHex8:br,formatRgb:Ne,toString:Ne}));function Te(){return`#${z(this.r)}${z(this.g)}${z(this.b)}`}function br(){return`#${z(this.r)}${z(this.g)}${z(this.b)}${z((isNaN(this.opacity)?1:this.opacity)*255)}`}function Ne(){const e=St(this.opacity);return`${e===1?"rgb(":"rgba("}${I(this.r)}, ${I(this.g)}, ${I(this.b)}${e===1?")":`, ${e})`}`}function St(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function I(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function z(e){return e=I(e),(e<16?"0":"")+e.toString(16)}function Ce(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new k(e,t,n,r)}function Ye(e){if(e instanceof k)return new k(e.h,e.s,e.l,e.opacity);if(e instanceof j||(e=ct(e)),!e)return new k;if(e instanceof k)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,c=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=c<.5?s+i:2-s-i,o*=60):a=c>0&&c<1?0:o,new k(o,a,c,e.opacity)}function wr(e,t,n,r){return arguments.length===1?Ye(e):new k(e,t,n,r??1)}function k(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}ht(k,wr,Rt(j,{brighter(e){return e=e==null?At:Math.pow(At,e),new k(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ot:Math.pow(ot,e),new k(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new b(It(e>=240?e-240:e+120,i,r),It(e,i,r),It(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new k(Pe(this.h),yt(this.s),yt(this.l),St(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=St(this.opacity);return`${e===1?"hsl(":"hsla("}${Pe(this.h)}, ${yt(this.s)*100}%, ${yt(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Pe(e){return e=(e||0)%360,e<0?e+360:e}function yt(e){return Math.max(0,Math.min(1,e||0))}function It(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const vr=Math.PI/180,_r=180/Math.PI,kt=18,Ze=.96422,Je=1,Qe=.82521,tn=4/29,W=6/29,en=3*W*W,Ar=W*W*W;function nn(e){if(e instanceof M)return new M(e.l,e.a,e.b,e.opacity);if(e instanceof C)return rn(e);e instanceof b||(e=Ke(e));var t=Bt(e.r),n=Bt(e.g),r=Bt(e.b),i=Dt((.2225045*t+.7168786*n+.0606169*r)/Je),s,o;return t===n&&n===r?s=o=i:(s=Dt((.4360747*t+.3850649*n+.1430804*r)/Ze),o=Dt((.0139322*t+.0971045*n+.7141733*r)/Qe)),new M(116*i-16,500*(s-i),200*(i-o),e.opacity)}function Sr(e,t,n,r){return arguments.length===1?nn(e):new M(e,t,n,r??1)}function M(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}ht(M,Sr,Rt(j,{brighter(e){return new M(this.l+kt*(e??1),this.a,this.b,this.opacity)},darker(e){return new M(this.l-kt*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=Ze*Ft(t),e=Je*Ft(e),n=Qe*Ft(n),new b(jt(3.1338561*t-1.6168667*e-.4906146*n),jt(-.9787684*t+1.9161415*e+.033454*n),jt(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function Dt(e){return e>Ar?Math.pow(e,1/3):e/en+tn}function Ft(e){return e>W?e*e*e:en*(e-tn)}function jt(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Bt(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function kr(e){if(e instanceof C)return new C(e.h,e.c,e.l,e.opacity);if(e instanceof M||(e=nn(e)),e.a===0&&e.b===0)return new C(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*_r;return new C(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function Xt(e,t,n,r){return arguments.length===1?kr(e):new C(e,t,n,r??1)}function C(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function rn(e){if(isNaN(e.h))return new M(e.l,0,0,e.opacity);var t=e.h*vr;return new M(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}ht(C,Xt,Rt(j,{brighter(e){return new C(this.h,this.c,this.l+kt*(e??1),this.opacity)},darker(e){return new C(this.h,this.c,this.l-kt*(e??1),this.opacity)},rgb(){return rn(this).rgb()}}));const Ut=e=>()=>e;function sn(e,t){return function(n){return e+n*t}}function Er(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Mr(e,t){var n=t-e;return n?sn(e,n>180||n<-180?n-360*Math.round(n/360):n):Ut(isNaN(e)?t:e)}function Tr(e){return(e=+e)==1?nt:function(t,n){return n-t?Er(t,n,e):Ut(isNaN(t)?n:t)}}function nt(e,t){var n=t-e;return n?sn(e,n):Ut(isNaN(e)?t:e)}const Re=function e(t){var n=Tr(t);function r(i,s){var o=n((i=Wt(i)).r,(s=Wt(s)).r),a=n(i.g,s.g),c=n(i.b,s.b),l=nt(i.opacity,s.opacity);return function(u){return i.r=o(u),i.g=a(u),i.b=c(u),i.opacity=l(u),i+""}}return r.gamma=e,r}(1);function Nr(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function Cr(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Pr(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=ut(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function Rr(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Et(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Ur(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=ut(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var Kt=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,qt=new RegExp(Kt.source,"g");function Or(e){return function(){return e}}function Hr(e){return function(t){return e(t)+""}}function Lr(e,t){var n=Kt.lastIndex=qt.lastIndex=0,r,i,s,o=-1,a=[],c=[];for(e=e+"",t=t+"";(r=Kt.exec(e))&&(i=qt.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,c.push({i:o,x:Et(r,i)})),n=qt.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?c[0]?Hr(c[0].x):Or(t):(t=c.length,function(l){for(var u=0,h;u<t;++u)a[(h=c[u]).i]=h.x(l);return a.join("")})}function ut(e,t){var n=typeof t,r;return t==null||n==="boolean"?Ut(t):(n==="number"?Et:n==="string"?(r=ct(t))?(t=r,Re):Lr:t instanceof ct?Re:t instanceof Date?Rr:Cr(t)?Nr:Array.isArray(t)?Pr:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Ur:Et)(e,t)}function on(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function zr(e){return function(t,n){var r=e((t=Xt(t)).h,(n=Xt(n)).h),i=nt(t.c,n.c),s=nt(t.l,n.l),o=nt(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const an=zr(Mr);function Ir(e,t){t===void 0&&(t=e,e=ut);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function Dr(e){return function(){return e}}function Fr(e){return+e}var Ue=[0,1];function R(e){return e}function Yt(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Dr(isNaN(t)?NaN:.5)}function jr(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Br(e,t,n){var r=e[0],i=e[1],s=t[0],o=t[1];return i<r?(r=Yt(i,r),s=n(o,s)):(r=Yt(r,i),s=n(s,o)),function(a){return s(r(a))}}function qr(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=Yt(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(a){var c=ee(e,a,1,r)-1;return s[c](i[c](a))}}function Vr(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Gr(){var e=Ue,t=Ue,n=ut,r,i,s,o=R,a,c,l;function u(){var f=Math.min(e.length,t.length);return o!==R&&(o=jr(e[0],e[f-1])),a=f>2?qr:Br,c=l=null,h}function h(f){return f==null||isNaN(f=+f)?s:(c||(c=a(e.map(r),t,n)))(r(o(f)))}return h.invert=function(f){return o(i((l||(l=a(t,e.map(r),Et)))(f)))},h.domain=function(f){return arguments.length?(e=Array.from(f,Fr),u()):e.slice()},h.range=function(f){return arguments.length?(t=Array.from(f),u()):t.slice()},h.rangeRound=function(f){return t=Array.from(f),n=on,u()},h.clamp=function(f){return arguments.length?(o=f?!0:R,u()):o!==R},h.interpolate=function(f){return arguments.length?(n=f,u()):n},h.unknown=function(f){return arguments.length?(s=f,h):s},function(f,p){return r=f,i=p,u()}}function Wr(){return Gr()(R,R)}function Xr(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Mt(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function K(e){return e=Mt(Math.abs(e)),e?e[1]:NaN}function Kr(e,t){return function(n,r){for(var i=n.length,s=[],o=0,a=e[0],c=0;i>0&&a>0&&(c+a+1>r&&(a=Math.max(1,r-c)),s.push(n.substring(i-=a,i+a)),!((c+=a+1)>r));)a=e[o=(o+1)%e.length];return s.reverse().join(t)}}function Yr(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var Zr=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Tt(e){if(!(t=Zr.exec(e)))throw new Error("invalid format: "+e);var t;return new ne({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Tt.prototype=ne.prototype;function ne(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}ne.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Jr(e){t:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break t;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var cn;function Qr(e,t){var n=Mt(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(cn=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+Mt(e,Math.max(0,t+s-1))[0]}function Oe(e,t){var n=Mt(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const He={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Xr,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Oe(e*100,t),r:Oe,s:Qr,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Le(e){return e}var ze=Array.prototype.map,Ie=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function ti(e){var t=e.grouping===void 0||e.thousands===void 0?Le:Kr(ze.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?Le:Yr(ze.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"−":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function l(h){h=Tt(h);var f=h.fill,p=h.align,m=h.sign,T=h.symbol,v=h.zero,_=h.width,B=h.comma,w=h.precision,Y=h.trim,A=h.type;A==="n"?(B=!0,A="g"):He[A]||(w===void 0&&(w=12),Y=!0,A="g"),(v||f==="0"&&p==="=")&&(v=!0,f="0",p="=");var gn=T==="$"?n:T==="#"&&/[boxX]/.test(A)?"0"+A.toLowerCase():"",mn=T==="$"?r:/[%p]/.test(A)?o:"",se=He[A],yn=/[defgprs%]/.test(A);w=w===void 0?6:/[gprs]/.test(A)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function oe(d){var O=gn,S=mn,q,ae,ft;if(A==="c")S=se(d)+S,d="";else{d=+d;var dt=d<0||1/d<0;if(d=isNaN(d)?c:se(Math.abs(d),w),Y&&(d=Jr(d)),dt&&+d==0&&m!=="+"&&(dt=!1),O=(dt?m==="("?m:a:m==="-"||m==="("?"":m)+O,S=(A==="s"?Ie[8+cn/3]:"")+S+(dt&&m==="("?")":""),yn){for(q=-1,ae=d.length;++q<ae;)if(ft=d.charCodeAt(q),48>ft||ft>57){S=(ft===46?i+d.slice(q+1):d.slice(q))+S,d=d.slice(0,q);break}}}B&&!v&&(d=t(d,1/0));var pt=O.length+d.length+S.length,N=pt<_?new Array(_-pt+1).join(f):"";switch(B&&v&&(d=t(N+d,N.length?_-S.length:1/0),N=""),p){case"<":d=O+d+S+N;break;case"=":d=O+N+d+S;break;case"^":d=N.slice(0,pt=N.length>>1)+O+d+S+N.slice(pt);break;default:d=N+O+d+S;break}return s(d)}return oe.toString=function(){return h+""},oe}function u(h,f){var p=l((h=Tt(h),h.type="f",h)),m=Math.max(-8,Math.min(8,Math.floor(K(f)/3)))*3,T=Math.pow(10,-m),v=Ie[8+m/3];return function(_){return p(T*_)+v}}return{format:l,formatPrefix:u}}var xt,re,ln;ei({thousands:",",grouping:[3],currency:["$",""]});function ei(e){return xt=ti(e),re=xt.format,ln=xt.formatPrefix,xt}function ni(e){return Math.max(0,-K(Math.abs(e)))}function ri(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(K(t)/3)))*3-K(Math.abs(e)))}function ii(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,K(t)-K(e))+1}function si(e,t,n,r){var i=lr(e,t,n),s;switch(r=Tt(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=ri(i,o))&&(r.precision=s),ln(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=ii(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=ni(i))&&(r.precision=s-(r.type==="%")*2);break}}return re(r)}function ie(e){var t=e.domain;return e.ticks=function(n){var r=t();return cr(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return si(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,o=r[i],a=r[s],c,l,u=10;for(a<o&&(l=o,o=a,a=l,l=i,i=s,s=l);u-- >0;){if(l=Gt(o,a,n),l===c)return r[i]=o,r[s]=a,t(r);if(l>0)o=Math.floor(o/l)*l,a=Math.ceil(a/l)*l;else if(l<0)o=Math.ceil(o*l)/l,a=Math.floor(a*l)/l;else break;c=l}return e},e}function Nt(){var e=Wr();return e.copy=function(){return Vr(e,Nt())},Pt.apply(e,arguments),ie(e)}function hn(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function o(c){return c!=null&&c<=c?i[ee(r,c,0,n)]:s}function a(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*t-(c-n)*e)/(n+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,a()):[e,t]},o.range=function(c){return arguments.length?(n=(i=Array.from(c)).length-1,a()):i.slice()},o.invertExtent=function(c){var l=i.indexOf(c);return l<0?[NaN,NaN]:l<1?[e,r[0]]:l>=n?[r[n-1],t]:[r[l-1],r[l]]},o.unknown=function(c){return arguments.length&&(s=c),o},o.thresholds=function(){return r.slice()},o.copy=function(){return hn().domain([e,t]).range(i).unknown(s)},Pt.apply(ie(o),arguments)}function un(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[ee(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return un().domain(e).range(t).unknown(n)},Pt.apply(i,arguments)}function oi(){var e=0,t=1,n,r,i,s,o=R,a=!1,c;function l(h){return h==null||isNaN(h=+h)?c:o(i===0?.5:(h=(s(h)-n)*i,a?Math.max(0,Math.min(1,h)):h))}l.domain=function(h){return arguments.length?([e,t]=h,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),l):[e,t]},l.clamp=function(h){return arguments.length?(a=!!h,l):a},l.interpolator=function(h){return arguments.length?(o=h,l):o};function u(h){return function(f){var p,m;return arguments.length?([p,m]=f,o=h(p,m),l):[o(0),o(1)]}}return l.range=u(ut),l.rangeRound=u(on),l.unknown=function(h){return arguments.length?(c=h,l):c},function(h){return s=h,n=h(e),r=h(t),i=n===r?0:1/(r-n),l}}function ai(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function fn(){var e=ie(oi()(R));return e.copy=function(){return ai(e,fn())},hr.apply(e,arguments)}class ci{constructor(t){this.cle=t}setColorScale(){switch(this.cle.scaleType){case"continuous":this.setContinousColorScale();break;case"discrete":this.setDiscreteColorScale();break;case"threshold":this.setThresholdColorScale();break;case"categorical":this.setCategoricalColorScale();break;default:this.invalidScaleType(this.cle.scaleType)}}setContinousColorScale(){const{interpolator:t,domain:n,range:r}=this.cle;this.colorScale=t?fn(t).domain(n):Nt().range(r).domain(n).interpolate(an)}setDiscreteColorScale(){this.colorScale=hn().domain(this.cle.domain).range(this.cle.range)}setThresholdColorScale(){const t=this.cle.domain;this.colorScale=un().domain(t.slice(1,t.length-1)).range(this.cle.range)}setCategoricalColorScale(){this.colorScale=Xe().domain(this.cle.domain).range(this.cle.range)}invalidScaleType(t){throw new Error(`invalid property scaletype: ${t}.
      Must be one of "categorical", "continuous", "discrete", "threshold".`)}}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const li={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},hi=e=>(...t)=>({_$litDirective$:e,values:t});class ui{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,n,r){this._$Ct=t,this._$AM=n,this._$Ci=r}_$AS(t,n){return this.update(t,n)}update(t,n){return this.render(...n)}}/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Vt=hi(class extends ui{constructor(e){var t;if(super(e),e.type!==li.ATTRIBUTE||e.name!=="class"||((t=e.strings)==null?void 0:t.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(e){return" "+Object.keys(e).filter(t=>e[t]).join(" ")+" "}update(e,[t]){var r,i;if(this.st===void 0){this.st=new Set,e.strings!==void 0&&(this.nt=new Set(e.strings.join(" ").split(/\s/).filter(s=>s!=="")));for(const s in t)t[s]&&!((r=this.nt)!=null&&r.has(s))&&this.st.add(s);return this.render(t)}const n=e.element.classList;for(const s of this.st)s in t||(n.remove(s),this.st.delete(s));for(const s in t){const o=!!t[s];o===this.st.has(s)||(i=this.nt)!=null&&i.has(s)||(o?(n.add(s),this.st.add(s)):(n.remove(s),this.st.delete(s)))}return F}});class fi{constructor(t){this.cle=t}render(){const t=this.cle.titleText?gt`<p class="legend-title">${this.cle.titleText}</p>`:"",n={hidden:this.cle.scaleType==="categorical"},r={hidden:this.cle.scaleType!=="categorical","categorical-container":!0};return gt`<div
      class="cle-container"
      style="width:${this.cle.width}px; height:auto;"
    >
      ${t}
      <slot name="subtitle"></slot>
      <svg
        class=${Vt(n)}
        width=${this.cle.width}
        height=${this.cle.height}
      >
        <!-- discrete and threshold -->
        <g class="rects">${this.renderDiscreteThreshold()}</g>
        <!-- continuous -->
        ${this.renderContinuous()}
        <!-- axis ticks -->
        ${this.renderAxis()}
      </svg>
      <ul class=${Vt(r)}>
        ${this.renderCategorical()}
      </ul>
      <slot name="footer"></slot>
    </div>`}renderCategorical(){if(this.cle.scaleType!=="categorical")return"";const{markType:t,colorScale:n,domain:r}=this.cle,i={"legend-item":!0,line:t==="line",circle:t==="circle"};return gt`${r.map(s=>gt`<li
          class=${Vt(i)}
          style="--color:${n(s)}"
        >
          ${s}
        </li>`)}`}renderContinuous(){var h;if(this.cle.scaleType!=="continuous"||this.cle.colorScale===null)return"";const{colorScale:t,marginTop:n,marginLeft:r,marginRight:i,tickSize:s,width:o,range:a}=this.cle,c=this.cle.marginBottom+s,l=this.cle.height+s,u=((h=t.interpolator)==null?void 0:h.call(t))||Ir(an,a);return J`<image
      x=${r}
      y=${n}
      width=${o-i-r}
      height=${l-n-c}
      preserveAspectRatio="none"
      href=${this.getColorRamp(u).toDataURL()}
    ></image>`}renderDiscreteThreshold(){if(this.cle.scaleType!=="discrete"&&this.cle.scaleType!=="threshold")return"";const{tickSize:t,marginTop:n,marginLeft:r,colorScale:i,xScale:s}=this.cle,o=this.cle.height+t,a=this.cle.marginBottom+t,c=i.range(),l=h=>i.invertExtent(h).map(s)[0]||r,u=h=>{let[f,p]=i.invertExtent(h).map(s);return f=f||0,p=p||s.range()[1],p-f};return J`${c.map(h=>J`<rect x=${l(h)} y=${n} width=${u(h)} height=${o-n-a} fill=${h}></rect>`)}`}renderAxis(){if(!this.cle.xScale||this.cle.scaleType==="categorical")return"";const{ticks:t,tickSize:n,tickFormat:r,tickFormatter:i,tickValues:s,xScale:o,marginTop:a}=this.cle,c=this.cle.height+n,l=this.cle.marginBottom+n,u=s!=null&&s.length?s:o.ticks.apply(o,[t,r]),h=Math.max(n,0)+3,f=()=>u.map(p=>J`<g class="tick" transform='translate(${o(p)},0)'>
      <line stroke="currentColor" y2="${n}" y1="${a+l-c}"></line>
      <text fill="currentColor" y="${h}" dy="0.71em">${i(p)}</text>
      </g>`);return J`<g
      class="x-axis"
      transform="translate(0, ${c-l})"
      text-anchor="middle"
    >${f()}</g>`}getColorRamp(t,n=256){const r=document.createElement("canvas");r.setAttribute("height","1"),r.setAttribute("width",`${n}`);const i=r.getContext("2d");for(let s=0;s<n;s++)i.fillStyle=t(s/(n-1)),i.fillRect(s,0,1,1);return r}}const di=325,pi=32,gi=6,mi=12,yi=16,xi=12,dn=5,$i=6,pn=".1f",bi=[0,1],wi=["#ffffcc","#a1dab4","#41b6c4","#2c7fb8","#253494"],vi="Color Legend Element",_i="circle",Ai="continuous",Si=["domain","range","interpolator","scaleType"],ki=["scaleType","ticks","tickSize","tickValues","tickFormat","tickFormatter","domain","range","marginLeft","marginRight","marginBottom","marginTop","width","height"];class Ei{constructor(t){this.cle=t}setXScale(){const{scaleType:t,marginLeft:n,width:r,marginRight:i}=this.cle;switch(t){case"continuous":this.xScale=Nt().domain(this.cle.domain).range([n,r-i]);break;case"discrete":case"threshold":this.xScale=Nt().domain([this.cle.domain[0],this.cle.domain[this.cle.domain.length-1]]).rangeRound([n,r-i]);break;case"categorical":this.xScale=null;break;default:throw new Error(`Unrecognized scaleType: ${t}`)}}handleAxisTicks(){var t,n,r;if((this.cle.scaleType==="discrete"||this.cle.scaleType==="threshold")&&!this.cle.tickValues){const[i,s]=this.xScale.domain();this.cle.tickValues=[i,...((n=(t=this.cle.colorScale)==null?void 0:t.thresholds)==null?void 0:n.call(t))||this.cle.colorScale.domain(),s]}typeof this.cle.tickFormatter!="function"&&((r=this.cle.tickFormat)!=null&&r.length?this.cle.tickFormatter=re(this.cle.tickFormat):this.cle.tickFormatter=this.xScale.tickFormat(this.cle.ticks||dn,this.cle.tickFormat||pn))}}const Mi=Tn`
  :host {
    --cle-font-family: sans-serif;
    --cle-font-family-title: var(--cle-font-family);
    --cle-font-size: 0.75rem;
    --cle-font-size-title: 0.875rem;
    --cle-letter-spacing: 0.3px;
    --cle-letter-spacing-title: 0.25px;
    --cle-font-weight: 400;
    --cle-font-weight-title: 500;
    --cle-color: currentColor;
    --cle-background: #fff;
    --cle-padding: 0.375rem;
    --cle-border: none;
    --cle-border-radius: 0;
    --cle-box-sizing: content-box;
    --cle-columns: 2;
    --cle-column-width: auto;
    --cle-item-margin: 0.375rem 0.75rem 0 0;
    --cle-line-width: 24px;
    --cle-line-height: 2px;
    --cle-swatch-size: 10px;
    --cle-swatch-width: var(--cle-swatch-size);
    --cle-swatch-height: var(--cle-swatch-size);
    --cle-swatch-margin: 0 0.5rem 0 0;
  }

  :host([hidden]),
  .hidden {
    display: none !important;
  }

  div.cle-container {
    font-family: var(--cle-font-family);
    font-size: var(--cle-font-size);
    font-weight: var(--cle-font-weight);
    letter-spacing: var(--cle-letter-spacing);
    color: var(--cle-color);
    background: var(--cle-background);
    display: inline-block;
    padding: var(--cle-padding);
    border: var(--cle-border);
    border-radius: var(--cle-border-radius);
    box-sizing: var(--cle-box-sizing);
  }

  svg {
    display: block;
    overflow: visible;
  }

  svg text {
    font-family: var(--cle-font-family);
    font-size: var(--cle-font-size);
    fill: var(--cle-color);
  }

  p.legend-title {
    margin: 0;
    font-family: var(--cle-font-family-title);
    font-size: var(--cle-font-size-title);
    font-weight: var(--cle-font-weight-title);
    letter-spacing: var(--cle-letter-spacing-title);
  }

  ul.categorical-container {
    padding: 0;
    margin: 0;
    column-count: var(--cle-columns);
    column-width: var(--cle-column-width);
  }

  .legend-item {
    display: inline-flex;
    align-items: center;
    margin: var(--cle-item-margin);
  }

  .legend-item::before {
    content: "";
    width: var(--cle-swatch-width);
    height: var(--cle-swatch-height);
    margin: var(--cle-swatch-margin);
    background: var(--color);
  }

  .legend-item.line::before {
    width: var(--cle-line-width);
    height: var(--cle-line-height);
  }

  .legend-item.circle::before {
    border-radius: 50%;
  }
`;var y=function(e,t,n,r){var i=arguments.length,s=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};let g=class extends et{constructor(){super(...arguments),this.titleText=vi,this.width=di,this.height=pi,this.marginTop=gi,this.marginRight=mi,this.marginBottom=yi,this.marginLeft=xi,this.scaleType=Ai,this.domain=bi,this.range=wi,this.markType=_i,this.ticks=dn,this.tickFormat=pn,this.tickSize=$i,this.colorScaleSetter=new ci(this),this.axisTickSetter=new Ei(this),this.renderer=new fi(this)}get interpolator(){return this._interpolator}set interpolator(t){if(typeof t=="function"){const n=this.interpolator;this._interpolator=t,this.requestUpdate("interpolator",n)}else throw new Error("interpolator must be a function.")}get tickFormatter(){return this._tickFormatter}set tickFormatter(t){if(typeof t=="function"){const n=this.tickFormatter;this._tickFormatter=t,this.requestUpdate("tickFormatter",n)}else throw new Error("tickFormatter must be a function.")}get colorScale(){return this.colorScaleSetter.colorScale}get xScale(){return this.axisTickSetter.xScale}render(){return this.renderer.render()}willUpdate(t){Si.some(n=>t.has(n))&&this.colorScaleSetter.setColorScale(),ki.some(n=>t.has(n))&&(this.axisTickSetter.setXScale(),this.axisTickSetter.handleAxisTicks())}};g.styles=[Mi];y([$({type:String})],g.prototype,"titleText",void 0);y([$({type:Number})],g.prototype,"width",void 0);y([$({type:Number})],g.prototype,"height",void 0);y([$({type:Number})],g.prototype,"marginTop",void 0);y([$({type:Number})],g.prototype,"marginRight",void 0);y([$({type:Number})],g.prototype,"marginBottom",void 0);y([$({type:Number})],g.prototype,"marginLeft",void 0);y([$({type:String})],g.prototype,"scaleType",void 0);y([$({type:Array})],g.prototype,"domain",void 0);y([$({type:Array})],g.prototype,"range",void 0);y([$({type:String})],g.prototype,"markType",void 0);y([$({type:Number})],g.prototype,"ticks",void 0);y([$({type:String})],g.prototype,"tickFormat",void 0);y([$({type:Number})],g.prototype,"tickSize",void 0);y([$({type:Array})],g.prototype,"tickValues",void 0);y([Zn("svg")],g.prototype,"svg",void 0);y([$({attribute:!1})],g.prototype,"interpolator",null);y([$({attribute:!1})],g.prototype,"tickFormatter",null);g=y([Wn("color-legend")],g);const Ti={class:"d-flex flex-column fill-height overflow-auto"},Ni=["for"],qi={__name:"EodashLayerControl",props:{map:{type:String,default:"first"},tools:{type:Array,default:()=>["datetime","info","config","legend","opacity"]},cssVars:{type:Object}},setup(e){const t=e,n={tools:t.tools,style:t.cssVars},{selectedCompareStac:r,selectedStac:i}=wn(vn()),s=_n(()=>t.map==="second"?ce.value!==null&&r.value!==null:le.value!==null&&i.value!==null),o=t.map==="second"?$n:bn,a=t.map==="second"?ce:le,c=An(null),l=async f=>{var B;const{layer:p,datetime:m}=f.detail,T=await xn(o,p);let v=[];T&&(await T.fetchCollection(),v=await T.updateLayerJson(m,p.get("id"),t.map));const _=(B=v==null?void 0:v.find(w=>{var Y;return((Y=w==null?void 0:w.properties)==null?void 0:Y.id)==="AnalysisGroup"}))==null?void 0:B.layers;_!=null&&_.length&&(_==null||_.forEach(w=>{w.properties.layerControlExpand=!0,w.properties.layerControlToolsExpand=!0}),a.value.layers=v)};let u;const h=f=>{clearTimeout(u),u=setTimeout(()=>{l(f)},500)};return(f,p)=>(he(),ue("span",Ti,[s.value?(he(),ue("eox-layercontrol",Sn({key:0},n,{for:kn(a),"onDatetime:updated":h,class:"fill-height",toolsAsList:"true",style:{"--eox-background-color":"transparent"},ref_key:"eoxLayercontrol",ref:c}),null,16,Ni)):En("",!0)]))}};export{qi as default};
