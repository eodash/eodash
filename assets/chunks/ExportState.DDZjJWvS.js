import{_ as O,aL as A,aM as j,p as z,C as r,b as I,o as y,w as c,G as a,j as s,c as f,e as S,F as J,B as P,aq as q,k as v,a as b,t as x,aN as D}from"./framework.QYKR7UOp.js";import{d as U,e as G}from"./mdi.egAaFUN7.js";import H from"./PopUp.Bla453rR.js";import{copyToClipBoard as g}from"@/utils";import{getChartSpec as K,getLayers as Q}from"@/store/actions";import{mapPosition as w,availableMapProjection as $}from"@/store/states";import{removeUnneededProperties as h}from"@/eodashSTAC/helpers";import"@/composables/DefineWidgets";const R={class:"d-flex flex-wrap gap-2 mb-4"},W={style:{position:"absolute",bottom:"15px"}},X={key:0,class:"text-success mr-3"},Y={class:"pa-3 code-block mb-4"},Z={key:0,class:"mb-4"},tt={class:"pa-3 code-block"},et={__name:"ExportState",props:A({getLayers:{type:Function,default:Q},getChartSpec:{type:Function,default:K}},{modelValue:{type:Boolean,required:!0,default:!1},modelModifiers:{}}),emits:["update:modelValue"],setup(_){const u=j(_,"modelValue"),e=_,l=z(!1),k=[{id:Symbol(),copyFn:async()=>await g(V(),l),copyAs:"simple map"},{id:Symbol(),copyFn:async()=>await g(JSON.stringify(e.getLayers()),l),copyAs:"layers configuration"},{id:Symbol(),copyFn:async()=>await g(T(),l),copyAs:"map tour section"},{id:Symbol(),copyFn:async()=>await g(C(),l),copyAs:"chart",showIf:()=>{var o;return!!((o=e.getChartSpec)!=null&&o.call(e))}}],T=()=>{const[o,t,i]=w.value,n="### <!--{ layers=",p=`zoom="${i}" center=[${[o,t]}] projection="${$.value}" animationOptions={duration:500}}-->
#### Tour step title
Text describing the current step of the tour and why it is interesting what the map shows currently
`;return`${n}'${JSON.stringify(h(e.getLayers()))}' ${p}`},V=()=>{const[o,t,i]=w.value,n='## Map Example <!--{as="eox-map" style="width: 100%; height: 500px;" layers=',p=`zoom="${i}" center=[${[o,t]}] projection="${$.value}" }-->`;return`${n}'${JSON.stringify(h(e.getLayers()))}' ${p}`},C=()=>{var n;const o=(n=e.getChartSpec)==null?void 0:n.call(e);return o?`## Chart Example <!--{as="eox-chart" style="height: 300px;" spec='${JSON.stringify(o)}' }-->`:""};return(o,t)=>{const i=r("v-card-title"),n=r("v-btn"),p=r("v-icon"),F=r("v-expand-transition"),L=r("v-card-text"),M=r("v-divider"),N=r("v-spacer"),B=r("v-card-actions"),E=r("v-card");return y(),I(H,{modelValue:u.value,"onUpdate:modelValue":t[1]||(t[1]=d=>u.value=d)},{default:c(()=>[a(E,{style:{"max-height":"498px"}},{default:c(()=>[a(i,{class:"bg-primary",style:{"max-height":"49px"}},{default:c(()=>[...t[2]||(t[2]=[s("h5",{class:"text-h5"},"Storytelling map configuration",-1)])]),_:1}),a(L,{class:"py-5 overflow-auto",style:{height:"400px"}},{default:c(()=>{var d;return[s("div",R,[(y(),f(J,null,P(k,m=>q(a(n,{class:"text-body-2",onClick:m.copyFn,key:m.id,small:"",variant:"text","prepend-icon":[v(U)]},{default:c(()=>[b(" copy as "+x(m.copyAs),1)]),_:2},1032,["onClick","prepend-icon"]),[[D,!m.showIf||m.showIf()]])),64))]),s("div",W,[a(F,null,{default:c(()=>[l.value?(y(),f("div",X,[a(p,{color:"success",left:"",icon:[v(G)]},null,8,["icon"]),t[3]||(t[3]=s("small",null,"copied!",-1))])):S("",!0)]),_:1})]),t[5]||(t[5]=s("p",{class:"text-body-2 mb-2"},[s("strong",null,"Map Layers Configuration")],-1)),s("div",Y,x(v(h)(_.getLayers())),1),(d=e.getChartSpec)!=null&&d.call(e)?(y(),f("div",Z,[t[4]||(t[4]=s("p",{class:"text-body-2 mb-2"},[s("strong",null,"Chart Spec (for export)")],-1)),s("div",tt,x(C()),1)])):S("",!0)]}),_:1}),a(M),a(B,{style:{"max-height":"49px"}},{default:c(()=>[a(N),a(n,{variant:"text",onClick:t[0]||(t[0]=d=>u.value=!u.value)},{default:c(()=>[...t[6]||(t[6]=[b(" Close ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},pt=O(et,[["__scopeId","data-v-6df78c93"]]);export{pt as default};
